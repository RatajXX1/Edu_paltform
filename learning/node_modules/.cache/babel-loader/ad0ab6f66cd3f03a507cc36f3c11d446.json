{"ast":null,"code":"import _objectSpread from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _slicedToArray from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from\"react\";import'../../styles/Manage/UsersList.css';import logo from'../../images/user.jpg';import serverPath from\"../../utilis/server-path\";import SelectUsers from\"./SelectUsers\";import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SerachInput=function SerachInput(callback){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Query=_useState2[0],SetQuery=_useState2[1];useEffect(function(){var delayDebounceFn=setTimeout(function(){callback.callback(Query);// Send Axios request here\n},1000);return function(){return clearTimeout(delayDebounceFn);};},[Query]);return/*#__PURE__*/_jsx(\"input\",{id:'ListUsers_search',type:'text',placeholder:'Szukaj',onChange:function onChange(e){return SetQuery(e.target.value);}});};var GroupList=/*#__PURE__*/function(_React$Component){_inherits(GroupList,_React$Component);var _super=_createSuper(GroupList);function GroupList(props){var _this;_classCallCheck(this,GroupList);_this=_super.call(this,props);_this.state={UserLoad:false,Users:[],PopState:0,query_serach:'',SearchingMode:false,PageLoad:1,SelectedID:0,loadedValues:{Name:'',Users:[]},Output:{Name:'',Users:[]}};_this.onBottom=_this.onBottomEvent.bind(_assertThisInitialized(_this));return _this;}_createClass(GroupList,[{key:\"refreshData\",value:function refreshData(){this.setState({UserLoad:false,Users:[],PopState:0,query_serach:'',SearchingMode:false,PageLoad:1,SelectedID:0,loadedValues:{Name:'',Users:[]},Output:{Name:'',Users:[]}});this.getData();}},{key:\"componentDidMount\",value:function componentDidMount(){this.getData();if(this.props.scroll!==undefined&&this.props.scroll.current!==null){this.props.scroll.current.addEventListener('scroll',this.onBottom);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.props.scroll!==undefined&&this.props.scroll.current!==null){this.props.scroll.current.removeEventListener('scroll',this.onBottom);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(this.props.scroll.current!==null){this.props.scroll.current.addEventListener('scroll',this.onBottom);this.props.scroll.current.addEventListener('scroll',this.onBottom);}}},{key:\"onBottomEvent\",value:function onBottomEvent(e){if(e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight){if(!this.state.UserLoad){this.state.PageLoad+=1;if(!this.state.SearchingMode)this.getData();else this.Searching();}}}},{key:\"SearchQuery\",value:function SearchQuery(query){if(!!query){this.state.PageLoad=1;this.state.query_serach=query;this.state.Users=[];this.state.UserLoad=false;this.state.SearchingMode=true;this.Searching();}else{this.state.SearchingMode=false;this.state.PageLoad=1;this.state.Users=[];this.state.UserLoad=false;this.getData();}}},{key:\"Searching\",value:function(){var _Searching=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(serverPath()+'api/Groups/Search.php?page='+this.state.PageLoad.toString()+'&query='+encodeURIComponent(this.state.query_serach),{headers:{'Access-Control-Allow-Origin':'*'},credentials:'include'}).then(function(e){return e.json();}).catch(null);case 3:resp=_context.sent;if(resp!==null){if(resp['CODE']==='OK'){if(Object.keys(resp['Groups']).length>0){this.state.Users=this.state.Users.concat(resp['Groups']);}else this.state.UserLoad=true;}else this.state.UserLoad=true;this.forceUpdate();}_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,this,[[0,7]]);}));function Searching(){return _Searching.apply(this,arguments);}return Searching;}()},{key:\"getData\",value:function(){var _getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(serverPath()+'api/Groups/?page='+this.state.PageLoad.toString(),{headers:{'Access-Control-Allow-Origin':'*'},credentials:'include'}).then(function(e){return e.json();}).catch(null);case 3:resp=_context2.sent;if(resp!==null){if(resp['CODE']==='OK'){if(Object.keys(resp['Groups']).length>0){this.state.Users=this.state.Users.concat(resp['Groups']);// this.state.PageLoad += 1\nthis.forceUpdate();}else this.state.UserLoad=true;}else this.state.UserLoad=true;}else this.state.UserLoad=true;_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);this.state.UserLoad=true;case 10:case\"end\":return _context2.stop();}}},_callee2,this,[[0,7]]);}));function getData(){return _getData.apply(this,arguments);}return getData;}()},{key:\"closePop\",value:function closePop(){if(this.state.PopState>0){this.state.PopState=0;this.forceUpdate();}}},{key:\"editUser\",value:function editUser(id,name){var _this2=this;this.state.SelectedID=id;this.state.loadedValues.Name=name;var getInfoUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var resp;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(serverPath()+'api/Groups/manage.php?ID='+id.toString(),{headers:{'Access-Control-Allow-Origin':'*'},credentials:'include'}).then(function(e){return e.json();}).catch(null);case 3:resp=_context3.sent;if(!(resp!==null)){_context3.next=17;break;}if(!(resp['CODE']==='OK')){_context3.next=14;break;}if(!(Object.keys(resp['Users']).length>0)){_context3.next=11;break;}_this2.state.loadedValues.Users=resp['Users'];return _context3.abrupt(\"return\",true);case 11:return _context3.abrupt(\"return\",false);case 12:_context3.next=15;break;case 14:return _context3.abrupt(\"return\",false);case 15:_context3.next=18;break;case 17:return _context3.abrupt(\"return\",false);case 18:_context3.next=23;break;case 20:_context3.prev=20;_context3.t0=_context3[\"catch\"](0);return _context3.abrupt(\"return\",false);case 23:case\"end\":return _context3.stop();}}},_callee3,null,[[0,20]]);}));return function getInfoUser(_x){return _ref.apply(this,arguments);};}();if(this.state.PopState===0){getInfoUser(id).then(function(resp){if(resp){_this2.state.PopState=2;_this2.forceUpdate();}});}}},{key:\"removeUser\",value:function(){var _removeUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var resp;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(serverPath()+'api/Groups/remove.php?ID='+this.state.SelectedID.toString(),{method:\"GET\",headers:{'Access-Control-Allow-Origin':'*'// 'Content-Type': 'multipart/form-data'\n},credentials:'include'}).then(function(se){return se.json();}).catch(null);case 3:resp=_context4.sent;if(resp!==null&&resp['CODE']==='OK'){toast.success('Pomyślnie usunięto grupę!',{closeOnClick:true,theme:'colored'});// this.state.PopState = 1\nthis.refreshData();this.forceUpdate();}else{toast.error('Wystąpił błąd!',{closeOnClick:true,theme:'colored'});this.refreshData();this.forceUpdate();}_context4.next=12;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);toast.error('Wystąpił błąd!',{closeOnClick:true,theme:'colored'});this.refreshData();this.forceUpdate();case 12:case\"end\":return _context4.stop();}}},_callee4,this,[[0,7]]);}));function removeUser(){return _removeUser.apply(this,arguments);}return removeUser;}()},{key:\"remove_User\",value:function remove_User(id){if(this.state.PopState===0){this.state.SelectedID=id;this.state.PopState=1;this.forceUpdate();}}},{key:\"openPop\",value:function openPop(){if(this.state.PopState===0){this.state.PopState=3;this.forceUpdate();}}},{key:\"renderData\",value:function renderData(){var tab=[];if(this.state.Users.length>0)for(var i=0;i<this.state.Users.length;i++){tab.push(/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"a\",{children:this.state.Users[i].ID})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"div\",{className:'User_list_view_mian_body_table_image_user',children:/*#__PURE__*/_jsx(\"a\",{children:this.state.Users[i].Name})})}),/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:this.editUser.bind(this,this.state.Users[i].ID,this.state.Users[i].Name),children:\"Edytuj\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.remove_User.bind(this,this.state.Users[i].ID),children:\"Usu\\u0144\"})]})]}));}else tab.push(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{colSpan:'3',children:/*#__PURE__*/_jsx(\"h2\",{children:\"Brak wynik\\xF3w!\"})})}));return tab;}},{key:\"CreateUser\",value:function(){var _CreateUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var resp;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return fetch(serverPath()+'api/Groups/create.php',{method:\"POST\",headers:{'Access-Control-Allow-Origin':'*'// 'Content-Type': 'multipart/form-data'\n},body:JSON.stringify(this.state.Output),credentials:'include'}).then(function(se){return se.json();}).catch(null);case 3:resp=_context5.sent;if(resp!==null){if(resp['CODE']==='OK'){toast.success('Pomyślnie stworzono nową grupę',{closeOnClick:true,theme:'colored'});}else{toast.error('Wystąpił błąd podczas tworzenia grupy',{closeOnClick:true,theme:'colored'});}this.refreshData();this.closePop();}else{toast.error('Wystąpił błąd podczas tworzenia grupy',{closeOnClick:true,theme:'colored'});this.refreshData();this.closePop();}_context5.next=12;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);toast.error('Wystąpił błąd podczas tworzenia grupy',{closeOnClick:true,theme:'colored'});this.refreshData();this.closePop();case 12:case\"end\":return _context5.stop();}}},_callee5,this,[[0,7]]);}));function CreateUser(){return _CreateUser.apply(this,arguments);}return CreateUser;}()},{key:\"UpdateUser\",value:function(){var _UpdateUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var resp;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return fetch(serverPath()+'api/Groups/edit.php',{method:\"POST\",headers:{'Access-Control-Allow-Origin':'*'// 'Content-Type': 'multipart/form-data'\n},body:JSON.stringify(_objectSpread(_objectSpread({},this.state.loadedValues),{},{ID:this.state.SelectedID})),credentials:'include'}).then(function(se){return se.json();}).catch(null);case 3:resp=_context6.sent;if(resp!==null){if(resp['CODE']==='OK'){toast.success('Pomyślnie zakutalizowano grupę',{closeOnClick:true,theme:'colored'});}else{toast.error('Wystąpił błąd podczas aktualizacjii grupy',{closeOnClick:true,theme:'colored'});}this.refreshData();this.closePop();}else{toast.error('Wystąpił błąd podczas aktualizacjii grupy',{closeOnClick:true,theme:'colored'});this.refreshData();this.closePop();}_context6.next=12;break;case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);toast.error('Wystąpił błąd podczas aktualizacjii grupy',{closeOnClick:true,theme:'colored'});this.refreshData();this.closePop();case 12:case\"end\":return _context6.stop();}}},_callee6,this,[[0,7]]);}));function UpdateUser(){return _UpdateUser.apply(this,arguments);}return UpdateUser;}()},{key:\"PopWindows\",value:function PopWindows(){var _this3=this;if(this.state.PopState===1){return/*#__PURE__*/_jsx(\"div\",{className:'User_list_view_mian_pop_back',children:/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop',style:{height:'200px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Czy na pewno chcesz usun\\u0105\\u0107 t\\u0105 grup\\u0119?\"}),/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop_buttons',children:[/*#__PURE__*/_jsx(\"button\",{onClick:this.closePop.bind(this),children:\"Nie\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.removeUser.bind(this),children:\"Tak\"})]})]})});}else if(this.state.PopState===2){return/*#__PURE__*/_jsx(\"div\",{className:'User_list_view_mian_pop_back',children:/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop',style:{height:'500px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edycja grupy\"}),/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop_body',children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nazwa grupy\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:this.state.loadedValues.Name,onChange:function onChange(e){_this3.state.loadedValues.Name=e.target.value;}}),/*#__PURE__*/_jsx(SelectUsers,{users:this.state.loadedValues.Users,style:{width:'unset'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop_buttons',children:[/*#__PURE__*/_jsx(\"button\",{onClick:this.closePop.bind(this),children:\"zamknij\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.UpdateUser.bind(this),children:\"zapisz\"})]})]})});}else if(this.state.PopState===3){return/*#__PURE__*/_jsx(\"div\",{className:'User_list_view_mian_pop_back',children:/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop',style:{height:'500px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Stw\\xF3rz grup\\u0119\"}),/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop_body',children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nazwa grupy\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:'Imie',onChange:function onChange(e){return _this3.state.Output.Name=e.target.value;}}),/*#__PURE__*/_jsx(SelectUsers,{users:this.state.Output.Users,style:{width:'unset'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop_buttons',children:[/*#__PURE__*/_jsx(\"button\",{onClick:this.closePop.bind(this),children:\"zamknij\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.CreateUser.bind(this),children:\"stw\\xF3rz\"})]})]})});}}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian',children:[this.state.PopState>0&&this.PopWindows(),/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_headbar',children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Grupy\"}),/*#__PURE__*/_jsxs(\"button\",{id:'User_list_view_headbar_add_user',onClick:this.openPop.bind(this),children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-person-plus-fill\",viewBox:\"0 0 16 16\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"}),/*#__PURE__*/_jsx(\"path\",{\"fill-rule\":\"evenodd\",d:\"M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z\"})]}),\"Dodaj grup\\u0119\"]}),/*#__PURE__*/_jsxs(\"div\",{className:'UserList_main_view_search',children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",className:\"bi bi-search\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"})}),/*#__PURE__*/_jsx(SerachInput,{callback:function callback(e){return _this4.SearchQuery(e);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_body',children:[/*#__PURE__*/_jsxs(\"table\",{className:'User_list_view_mian_body_table',children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:'5%',whiteSpace:'nowrap'},children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nazwa\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'300px'}})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.renderData()})]}),/*#__PURE__*/_jsx(\"div\",{id:'User_list_view_mian_body_end'})]})]});}}]);return GroupList;}(React.Component);export{GroupList as default};","map":{"version":3,"sources":["/Users/michalratajewski/edupage/files/learning/src/windows/Manage/GroupList.js"],"names":["React","useEffect","useState","logo","serverPath","SelectUsers","toast","SerachInput","callback","Query","SetQuery","delayDebounceFn","setTimeout","clearTimeout","e","target","value","GroupList","props","state","UserLoad","Users","PopState","query_serach","SearchingMode","PageLoad","SelectedID","loadedValues","Name","Output","onBottom","onBottomEvent","bind","setState","getData","scroll","undefined","current","addEventListener","removeEventListener","prevProps","prevState","snapshot","scrollHeight","scrollTop","clientHeight","Searching","query","fetch","toString","encodeURIComponent","headers","credentials","then","json","catch","resp","Object","keys","length","concat","forceUpdate","id","name","getInfoUser","method","se","success","closeOnClick","theme","refreshData","error","tab","i","push","ID","editUser","remove_User","body","JSON","stringify","closePop","height","removeUser","width","UpdateUser","CreateUser","PopWindows","openPop","SearchQuery","whiteSpace","renderData","Component"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport '../../styles/Manage/UsersList.css';\nimport logo from '../../images/user.jpg';\nimport serverPath from \"../../utilis/server-path\";\nimport SelectUsers from \"./SelectUsers\";\n\nimport { toast } from 'react-toastify';\n\n\nconst SerachInput = (callback) => {\n    const [Query, SetQuery] = useState('')\n\n    useEffect(() => {\n        const delayDebounceFn = setTimeout(() => {\n            callback.callback(Query)\n            // Send Axios request here\n        }, 1000)\n\n        return () => clearTimeout(delayDebounceFn)\n    }, [Query])\n\n    return (\n        <input id={'ListUsers_search'} type={'text'} placeholder={'Szukaj'} onChange={(e) => SetQuery(e.target.value)}/>\n    )\n\n}\n\nexport default class GroupList extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            UserLoad: false,\n            Users: [],\n            PopState: 0,\n            query_serach: '',\n            SearchingMode: false,\n            PageLoad: 1,\n            SelectedID: 0,\n            loadedValues: {\n                Name: '',\n                Users: []\n            },\n            Output: {\n                Name: '',\n                Users: []\n            }\n        }\n\n\n        this.onBottom = this.onBottomEvent.bind(this)\n\n    }\n\n    refreshData() {\n        this.setState({\n            UserLoad: false,\n            Users: [],\n            PopState: 0,\n            query_serach: '',\n            SearchingMode: false,\n            PageLoad: 1,\n            SelectedID: 0,\n            loadedValues: {\n                Name: '',\n                Users: []\n            },\n            Output: {\n                Name: '',\n                Users: []\n            }\n        })\n        this.getData()\n    }\n\n    componentDidMount() {\n        this.getData()\n        if (this.props.scroll !== undefined && this.props.scroll.current !== null) {\n            this.props.scroll.current.addEventListener('scroll', this.onBottom)\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.props.scroll !== undefined && this.props.scroll.current !== null) {\n            this.props.scroll.current.removeEventListener('scroll', this.onBottom)\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.scroll.current !== null\n        ) {\n            this.props.scroll.current.addEventListener('scroll', this.onBottom)\n            this.props.scroll.current.addEventListener('scroll', this.onBottom)\n        }\n    }\n\n    onBottomEvent(e) {\n        if (e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight)\n        {\n            if (!this.state.UserLoad) {\n                this.state.PageLoad += 1\n                if (!this.state.SearchingMode)\n                    this.getData()\n                else this.Searching()\n            }\n        }\n    }\n\n    SearchQuery(query) {\n        if (!!query) {\n            this.state.PageLoad = 1\n            this.state.query_serach = query\n            this.state.Users = []\n            this.state.UserLoad = false\n            this.state.SearchingMode = true\n            this.Searching()\n        } else {\n            this.state.SearchingMode = false\n            this.state.PageLoad = 1\n            this.state.Users = []\n            this.state.UserLoad = false\n            this.getData()\n        }\n    }\n\n    async Searching() {\n        try {\n            const resp = await fetch(serverPath() + 'api/Groups/Search.php?page='+ this.state.PageLoad.toString() +'&query=' + encodeURIComponent(this.state.query_serach)\n                , {\n                    headers: {\n                        'Access-Control-Allow-Origin': '*'\n                    },\n                    credentials: 'include'\n                }).then(e => e.json()).catch(null)\n\n            if (resp !== null) {\n                if (resp['CODE'] === 'OK') {\n                    if (Object.keys(resp['Groups'] ).length > 0) {\n                        this.state.Users = this.state.Users.concat(resp['Groups'])\n                    } else this.state.UserLoad = true\n                } else this.state.UserLoad = true\n                this.forceUpdate()\n            }\n        }\n        catch (e) {\n\n        }\n    }\n\n    async getData() {\n        try {\n            const resp = await fetch(serverPath() + 'api/Groups/?page=' + this.state.PageLoad.toString(), {\n                headers: {\n                    'Access-Control-Allow-Origin': '*'\n                },\n                credentials: 'include'\n            }).then(e => e.json()).catch(null)\n\n            if (resp !== null) {\n                if (resp['CODE'] === 'OK') {\n                    if (Object.keys(resp['Groups']).length > 0) {\n                        this.state.Users = this.state.Users.concat(resp['Groups'])\n                        // this.state.PageLoad += 1\n                        this.forceUpdate()\n                    } else this.state.UserLoad = true\n                } else this.state.UserLoad = true\n            }else this.state.UserLoad = true\n        } catch (e) {\n            this.state.UserLoad  = true\n        }\n    }\n\n    closePop() {\n        if (this.state.PopState > 0) {\n            this.state.PopState = 0\n            this.forceUpdate()\n        }\n    }\n\n    editUser(id, name) {\n        this.state.SelectedID = id\n        this.state.loadedValues.Name = name\n        const getInfoUser = async (id) => {\n            try {\n                const resp = await fetch(serverPath() + 'api/Groups/manage.php?ID=' + id.toString(), {\n                    headers: {\n                        'Access-Control-Allow-Origin': '*'\n                    },\n                    credentials: 'include'\n                }).then(e => e.json()).catch(null)\n\n                if (resp !== null) {\n                    if (resp['CODE'] === 'OK') {\n                        if (Object.keys(resp['Users']).length > 0) {\n                            this.state.loadedValues.Users = resp['Users']\n                            return true\n                        } else return false\n                    } else return false\n                }else return false\n            } catch (e) {\n                return false\n            }\n        }\n\n        if (this.state.PopState === 0) {\n            getInfoUser(id).then((resp) => {\n                if (resp) {\n                    this.state.PopState = 2\n                    this.forceUpdate()\n                }\n            })\n        }\n    }\n\n    async removeUser() {\n        try {\n\n            const resp = await fetch(\n                serverPath() + 'api/Groups/remove.php?ID=' + this.state.SelectedID.toString(),\n                {\n                    method:\"GET\",\n                    headers: {\n                        'Access-Control-Allow-Origin':'*',\n                        // 'Content-Type': 'multipart/form-data'\n                    },\n                    credentials: 'include'\n                }\n            ).then(se => se.json()).catch(null)\n\n            if (resp !== null && resp['CODE'] === 'OK') {\n                toast.success('Pomyślnie usunięto grupę!', {closeOnClick: true, theme: 'colored'})\n                // this.state.PopState = 1\n                this.refreshData()\n                this.forceUpdate()\n            } else {\n                toast.error('Wystąpił błąd!', {closeOnClick: true, theme: 'colored'})\n                this.refreshData()\n                this.forceUpdate()\n            }\n\n\n        } catch (e) {\n            toast.error('Wystąpił błąd!', {closeOnClick: true, theme: 'colored'})\n            this.refreshData()\n            this.forceUpdate()\n        }\n    }\n\n    remove_User(id) {\n        if (this.state.PopState === 0) {\n            this.state.SelectedID = id\n            this.state.PopState = 1\n            this.forceUpdate()\n        }\n\n    }\n\n    openPop() {\n        if (this.state.PopState === 0) {\n            this.state.PopState = 3\n            this.forceUpdate()\n        }\n    }\n\n    renderData() {\n        const tab = []\n        if (this.state.Users.length > 0) for (let i = 0; i < this.state.Users.length; i++) {\n            tab.push(\n                <tr>\n                    <th>\n                        <a>{this.state.Users[i].ID}</a>\n                    </th>\n                    <th>\n                        <div className={'User_list_view_mian_body_table_image_user'}>\n                            {/*<div className={'User_list_view_mian_body_table_image_user_img'}>*/}\n                            {/*    <img src={logo}/>*/}\n                            {/*</div>*/}\n                            <a>{this.state.Users[i].Name }</a>\n                        </div>\n                    </th>\n                    {/*<th>*/}\n                    {/*    <a>{this.ranks[this.state.Users[i].Type]}</a>*/}\n                    {/*</th>*/}\n                    <th>\n                        <button onClick={this.editUser.bind(this, this.state.Users[i].ID, this.state.Users[i].Name)}>\n                            Edytuj\n                        </button>\n                        <button onClick={this.remove_User.bind(this,this.state.Users[i].ID)}>\n                            Usuń\n                        </button>\n                    </th>\n                </tr>\n            )\n        }\n        else tab.push(\n            <tr>\n                <th colSpan={'3'}>\n                    <h2>\n                        Brak wyników!\n                    </h2>\n                </th>\n            </tr>\n        )\n        return tab\n    }\n\n    async CreateUser() {\n        try {\n            const resp = await fetch(\n                serverPath() + 'api/Groups/create.php',\n                {\n                    method:\"POST\",\n                    headers: {\n                        'Access-Control-Allow-Origin':'*',\n                        // 'Content-Type': 'multipart/form-data'\n                    },\n                    body: JSON.stringify(this.state.Output),\n                    credentials: 'include'\n                }\n            ).then(se => se.json()).catch(null)\n            if (resp !== null) {\n                if (resp['CODE'] === 'OK') {\n                    toast.success('Pomyślnie stworzono nową grupę', {closeOnClick: true, theme: 'colored'})\n                } else {\n                    toast.error('Wystąpił błąd podczas tworzenia grupy', {closeOnClick: true, theme: 'colored'})\n                }\n                this.refreshData()\n                this.closePop()\n            } else {\n                toast.error('Wystąpił błąd podczas tworzenia grupy', {closeOnClick: true, theme: 'colored'})\n                this.refreshData()\n                this.closePop()\n            }\n        } catch (e) {\n            toast.error('Wystąpił błąd podczas tworzenia grupy', {closeOnClick: true, theme: 'colored'})\n            this.refreshData()\n            this.closePop()\n        }\n    }\n\n    async UpdateUser() {\n        try {\n            const resp = await fetch(\n                serverPath() + 'api/Groups/edit.php',\n                {\n                    method:\"POST\",\n                    headers: {\n                        'Access-Control-Allow-Origin':'*',\n                        // 'Content-Type': 'multipart/form-data'\n                    },\n                    body: JSON.stringify({...this.state.loadedValues, ID: this.state.SelectedID}),\n                    credentials: 'include'\n                }\n            ).then(se => se.json()).catch(null)\n            if (resp !== null) {\n                if (resp['CODE'] === 'OK') {\n                    toast.success('Pomyślnie zakutalizowano grupę', {closeOnClick: true, theme: 'colored'})\n                } else {\n                    toast.error('Wystąpił błąd podczas aktualizacjii grupy', {closeOnClick: true, theme: 'colored'})\n                }\n                this.refreshData()\n                this.closePop()\n            } else {\n                toast.error('Wystąpił błąd podczas aktualizacjii grupy', {closeOnClick: true, theme: 'colored'})\n                this.refreshData()\n                this.closePop()\n            }\n        } catch (e) {\n            toast.error('Wystąpił błąd podczas aktualizacjii grupy', {closeOnClick: true, theme: 'colored'})\n            this.refreshData()\n            this.closePop()\n        }\n    }\n\n    PopWindows() {\n        if (this.state.PopState === 1) {\n            return (\n                <div className={'User_list_view_mian_pop_back'}>\n                    <div className={'User_list_view_mian_pop'} style={{height: '200px'}}>\n                        <h2>Czy na pewno chcesz usunąć tą grupę?</h2>\n                        <div className={'User_list_view_mian_pop_buttons'}>\n                            <button onClick={this.closePop.bind(this)}>Nie</button>\n                            <button onClick={this.removeUser.bind(this)}>Tak</button>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n        else if (this.state.PopState === 2) {\n            return (\n                <div className={'User_list_view_mian_pop_back'}>\n                    <div className={'User_list_view_mian_pop'} style={{height: '500px' }}>\n                        <h2>Edycja grupy</h2>\n                        <div className={'User_list_view_mian_pop_body'}>\n                            <label>\n                                Nazwa grupy\n                            </label>\n                            <input type={\"text\"} defaultValue={this.state.loadedValues.Name} onChange={e => {\n                                this.state.loadedValues.Name = e.target.value\n                            }}/>\n                            <SelectUsers users={this.state.loadedValues.Users} style={{width: 'unset'}}/>\n                        </div>\n                        <div className={'User_list_view_mian_pop_buttons'}>\n                            <button onClick={this.closePop.bind(this)}>zamknij</button>\n                            <button onClick={this.UpdateUser.bind(this)}>zapisz</button>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n        else if (this.state.PopState === 3) {\n            return (\n                <div className={'User_list_view_mian_pop_back'}>\n                    <div className={'User_list_view_mian_pop'} style={{height: '500px' }}>\n                        <h2>Stwórz grupę</h2>\n                        <div className={'User_list_view_mian_pop_body'}>\n                            <label>\n                                Nazwa grupy\n                            </label>\n                            <input type={\"text\"} placeholder={'Imie'} onChange={e => this.state.Output.Name = e.target.value}/>\n                            <SelectUsers users={this.state.Output.Users} style={{width: 'unset'}}/>\n\n                        </div>\n                        <div className={'User_list_view_mian_pop_buttons'}>\n                            <button onClick={this.closePop.bind(this)}>zamknij</button>\n                            <button onClick={this.CreateUser.bind(this)}>stwórz</button>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n    }\n\n    render() {\n        return (\n            <div className={'User_list_view_mian'}>\n\n                {\n                    this.state.PopState > 0 && this.PopWindows()\n                }\n                <div className={'User_list_view_headbar'}>\n                    <h1>Grupy</h1>\n                    <button id={'User_list_view_headbar_add_user'} onClick={this.openPop.bind(this)}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\n                             className=\"bi bi-person-plus-fill\" viewBox=\"0 0 16 16\">\n                            <path d=\"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/>\n                            <path fill-rule=\"evenodd\"\n                                  d=\"M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z\"/>\n                        </svg>\n                        Dodaj grupę\n                    </button>\n                    <div className={'UserList_main_view_search'}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\n                             className=\"bi bi-search\" viewBox=\"0 0 16 16\">\n                            <path\n                                d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"/>\n                        </svg>\n                        <SerachInput callback={(e) => this.SearchQuery(e)}/>\n                    </div>\n                </div>\n                <div className={'User_list_view_mian_body'}>\n                    <table className={'User_list_view_mian_body_table'}>\n                        <thead>\n                        <tr >\n                            <th style={{width: '5%', whiteSpace: 'nowrap'}} >ID</th>\n                            <th>Nazwa</th>\n                            {/*<th style={{width: '200px'}}>Typ</th>*/}\n                            <th style={{width: '300px'}}/>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {\n                            this.renderData()\n                        }\n                        </tbody>\n\n                    </table>\n                    <div id={'User_list_view_mian_body_end'}>\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n}"]},"metadata":{},"sourceType":"module"}