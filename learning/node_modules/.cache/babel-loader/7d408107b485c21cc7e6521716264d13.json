{"ast":null,"code":"import _asyncToGenerator from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/michalratajewski/edupage/files/learning/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import'../styles/profiles.css';import serverPath from\"../utilis/server-path\";import Logo from'../images/user.jpg';import{toast}from\"react-toastify\";import crypto from\"../utilis/crypto\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=/*#__PURE__*/function(_React$Component){_inherits(Profile,_React$Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.state={ID:0,PopView:0,Output:{Password:'',RPassword:''}};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){this.initilizeParams();}},{key:\"initilizeParams\",value:function initilizeParams(){var params=new URLSearchParams(window.location.search);try{if(params.get(\"ID\")!==undefined)this.state.ID=parseInt(params.get('ID'));}catch(e){}}},{key:\"sumbitChangePaswortd\",value:function(){var _sumbitChangePaswortd=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.state.Output.Password.replaceAll(' ','')!==this.state.Output.RPassword.replaceAll(' ',''))){_context.next=2;break;}return _context.abrupt(\"return\",toast.error('Hasła nie są takie same!',{closeOnClick:true,theme:'colored'}));case 2:_context.prev=2;_context.next=5;return crypto.sha256(this.state.Output.Password.replaceAll(' ',''));case 5:this.state.Output.Password=_context.sent;_context.next=8;return fetch(serverPath()+'api/Users/Changepass.php',{method:\"POST\",headers:{'Access-Control-Allow-Origin':'*'// 'Content-Type': 'multipart/form-data'\n},body:JSON.stringify({Password:this.state.Output.Password}),credentials:'include'}).then(function(se){return se.json();}).catch(null);case 8:resp=_context.sent;if(resp!==null){if(resp['CODE']==='OK'){toast.success('Pomyślnie zaktualizowano hasło',{closeOnClick:true,theme:'colored'});}else{toast.error('Wystąpił błąd!',{closeOnClick:true,theme:'colored'});}this.ClosePop();}else{toast.error('Wystąpił błąd!',{closeOnClick:true,theme:'colored'});this.ClosePop();}_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);toast.error('Wystąpił błąd!',{closeOnClick:true,theme:'colored'});this.ClosePop();case 16:case\"end\":return _context.stop();}}},_callee,this,[[2,12]]);}));function sumbitChangePaswortd(){return _sumbitChangePaswortd.apply(this,arguments);}return sumbitChangePaswortd;}()},{key:\"ChangePassword\",value:function ChangePassword(){this.state.PopView=1;this.forceUpdate();}},{key:\"ClosePop\",value:function ClosePop(){this.state.PopView=0;this.forceUpdate();}},{key:\"Popview\",value:function Popview(){var _this2=this;if(this.state.PopView===1){return/*#__PURE__*/_jsx(\"div\",{className:'User_list_view_mian_pop_back',children:/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop',children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Zmiana has\\u0142a\"}),/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop_body',children:[/*#__PURE__*/_jsx(\"label\",{children:\"Has\\u0142o\"}),/*#__PURE__*/_jsx(\"input\",{style:{width:'50%'},type:\"password\",onChange:function onChange(e){return _this2.state.Output.Password=e.target.value;}}),/*#__PURE__*/_jsx(\"label\",{children:\"Powt\\xF3rz has\\u0142o\"}),/*#__PURE__*/_jsx(\"input\",{style:{width:'50%'},type:\"password\",onChange:function onChange(e){return _this2.state.Output.RPassword=e.target.value;}})]}),/*#__PURE__*/_jsxs(\"div\",{className:'User_list_view_mian_pop_buttons',children:[/*#__PURE__*/_jsx(\"button\",{onClick:this.ClosePop.bind(this),children:\"zamknij\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.sumbitChangePaswortd.bind(this),children:\"zapisz\"})]})]})});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:'Profile_main_view',children:[this.Popview(),/*#__PURE__*/_jsxs(\"div\",{className:'Profile_main_view_body',children:[/*#__PURE__*/_jsxs(\"div\",{className:'Profile_main_view_body_item',children:[/*#__PURE__*/_jsx(\"div\",{className:'Profile_main_view_body_item_image',children:/*#__PURE__*/_jsx(\"img\",{src:this.props.Image===\"\"||this.props.Image===undefined?Logo:serverPath()+this.props.Image})}),/*#__PURE__*/_jsxs(\"div\",{className:'Profile_main_view_body_item_text',children:[/*#__PURE__*/_jsx(\"div\",{className:'Profile_main_view_body_item_text_o',children:/*#__PURE__*/_jsx(\"span\",{children:this.props.User_data.Name+' '+this.props.User_data.Surrname})}),/*#__PURE__*/_jsx(\"div\",{className:'Profile_main_view_body_item_text_o',children:/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'lighter',fontSize:'15px'},children:this.props.User_data.Email})})]})]}),/*#__PURE__*/_jsx(\"span\",{onClick:this.ChangePassword.bind(this),style:{display:'block',marginTop:'20px',fontWeight:'bold',cursor:'pointer'},children:\"Zmie\\u0144 has\\u0142o\"})]})]});}}]);return Profile;}(React.Component);export{Profile as default};","map":{"version":3,"sources":["/Users/michalratajewski/edupage/files/learning/src/windows/Profile.js"],"names":["React","serverPath","Logo","toast","crypto","Profile","props","state","ID","PopView","Output","Password","RPassword","initilizeParams","params","URLSearchParams","window","location","search","get","undefined","parseInt","e","replaceAll","error","closeOnClick","theme","sha256","fetch","method","headers","body","JSON","stringify","credentials","then","se","json","catch","resp","success","ClosePop","forceUpdate","width","target","value","bind","sumbitChangePaswortd","Popview","Image","User_data","Name","Surrname","fontWeight","fontSize","Email","ChangePassword","display","marginTop","cursor","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport '../styles/profiles.css';\nimport serverPath from \"../utilis/server-path\";\nimport Logo from '../images/user.jpg'\nimport {toast} from \"react-toastify\";\nimport crypto from \"../utilis/crypto\";\n\n\nexport default class Profile extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            ID: 0,\n            PopView: 0,\n            Output: {\n                Password: '',\n                RPassword: ''\n            }\n        }\n    }\n\n    componentDidMount() {\n        this.initilizeParams()\n    }\n\n    initilizeParams() {\n        const params = new URLSearchParams(window.location.search)\n        try {\n            if (params.get(\"ID\") !== undefined) this.state.ID = parseInt(params.get('ID'))\n        } catch (e) {\n\n        }\n    }\n\n    async sumbitChangePaswortd() {\n        if (\n            this.state.Output.Password.replaceAll(' ', '') !==\n            this.state.Output.RPassword.replaceAll(' ', '')\n        ) {\n            return toast.error('Hasła nie są takie same!', {closeOnClick: true, theme: 'colored'})\n        }\n\n        try {\n            this.state.Output.Password = await crypto.sha256(this.state.Output.Password.replaceAll(' ', '') )\n            const resp = await fetch(\n                serverPath() + 'api/Users/Changepass.php',\n                {\n                    method:\"POST\",\n                    headers: {\n                        'Access-Control-Allow-Origin':'*',\n                        // 'Content-Type': 'multipart/form-data'\n                    },\n                    body: JSON.stringify({Password: this.state.Output.Password}),\n                    credentials: 'include'\n                }\n            ).then(se => se.json()).catch(null)\n            if (resp !== null) {\n                if (resp['CODE'] === 'OK') {\n                    toast.success('Pomyślnie zaktualizowano hasło', {closeOnClick: true, theme: 'colored'})\n                } else {\n                    toast.error('Wystąpił błąd!', {closeOnClick: true, theme: 'colored'})\n                }\n                this.ClosePop()\n            } else {\n                toast.error('Wystąpił błąd!', {closeOnClick: true, theme: 'colored'})\n                this.ClosePop()\n            }\n        } catch (e) {\n            toast.error('Wystąpił błąd!', {closeOnClick: true, theme: 'colored'})\n            this.ClosePop()\n        }\n    }\n\n    ChangePassword() {\n        this.state.PopView = 1\n        this.forceUpdate()\n    }\n\n    ClosePop() {\n        this.state.PopView = 0\n        this.forceUpdate()\n    }\n\n    Popview() {\n        if (this.state.PopView === 1) {\n            return (\n                <div className={'User_list_view_mian_pop_back'}>\n                    <div className={'User_list_view_mian_pop'}>\n                        <h2>Zmiana hasła</h2>\n                        <div className={'User_list_view_mian_pop_body'}>\n                            <label>\n                                Hasło\n                            </label>\n                            <input style={{width: '50%'}} type={\"password\"} onChange={e => this.state.Output.Password = e.target.value}/>\n                            <label>\n                                Powtórz hasło\n                            </label>\n                            <input style={{width: '50%'}}  type={\"password\"} onChange={e => this.state.Output.RPassword = e.target.value}/>\n                        </div>\n                        <div className={'User_list_view_mian_pop_buttons'}>\n                            <button onClick={this.ClosePop.bind(this)} >zamknij</button>\n                            <button onClick={this.sumbitChangePaswortd.bind(this)}>zapisz</button>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n    }\n\n    render() {\n        return (\n            <div className={'Profile_main_view'}>\n                {\n                    this.Popview()\n                }\n                <div className={'Profile_main_view_body'}>\n                    <div className={'Profile_main_view_body_item'}>\n                        <div className={'Profile_main_view_body_item_image'}>\n                            <img src={ this.props.Image === \"\" || this.props.Image === undefined ? Logo : serverPath() + this.props.Image}/>\n                        </div>\n                        <div className={'Profile_main_view_body_item_text'}>\n                            <div className={'Profile_main_view_body_item_text_o'}>\n                                <span>{this.props.User_data.Name + ' ' + this.props.User_data.Surrname}</span>\n                                {/*<button>*/}\n                                {/*    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"*/}\n                                {/*         className=\"bi bi-pencil-square\" viewBox=\"0 0 16 16\">*/}\n                                {/*        <path*/}\n                                {/*            d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"/>*/}\n                                {/*        <path fill-rule=\"evenodd\"*/}\n                                {/*              d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"/>*/}\n                                {/*    </svg>*/}\n                                {/*</button>*/}\n                            </div>\n                            <div className={'Profile_main_view_body_item_text_o'}>\n                                <span style={{fontWeight: 'lighter', fontSize: '15px'}}>{this.props.User_data.Email}</span>\n                                {/*<button>*/}\n                                {/*    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"*/}\n                                {/*         className=\"bi bi-pencil-square\" viewBox=\"0 0 16 16\">*/}\n                                {/*        <path*/}\n                                {/*            d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"/>*/}\n                                {/*        <path fill-rule=\"evenodd\"*/}\n                                {/*              d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"/>*/}\n                                {/*    </svg>*/}\n                                {/*</button>*/}\n                            </div>\n\n                        </div>\n                    </div>\n                    <span onClick={this.ChangePassword.bind(this)} style={{display: 'block', marginTop: '20px', fontWeight: 'bold', cursor: 'pointer'}}>Zmień hasło</span>\n                </div>\n            </div>\n        )\n    }\n\n}"]},"metadata":{},"sourceType":"module"}