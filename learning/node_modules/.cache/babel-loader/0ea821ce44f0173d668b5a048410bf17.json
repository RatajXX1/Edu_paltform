{"ast":null,"code":"import crypto from \"./crypto\";\nimport serverPath from \"./server-path\";\nexport default {\n  async authorize(login_input, password_input) {\n    try {\n      password_input = await crypto.sha256(password_input);\n      console.log(password_input);\n      const resp = await fetch(serverPath() + 'api/auth/login.php', {\n        method: 'POST',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          login: login_input,\n          password: password_input,\n          Auto_login: false\n        }),\n        credentials: 'include'\n      }).then(data => data.json()).catch(null);\n\n      if (resp !== null) {\n        if (resp[\"CODE\"] === 'OK') {\n          window.sessionStorage.setItem('Token', resp['Token']);\n          return true;\n        } else {\n          return false;\n        }\n      } else return false;\n    } catch (e) {\n      return false;\n    }\n  },\n\n  async CheckAuthorize() {\n    try {\n      const resp = await fetch(serverPath() + 'api/auth/authorize.php', {\n        method: 'GET',\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        },\n        credentials: 'include'\n      }).then(data => data.json()).catch(null);\n\n      if (resp !== null) {\n        if (resp['CODE'] === 'OK') {\n          return resp['DATA'];\n        } else return null;\n      } else return null;\n    } catch (e) {\n      return null;\n    }\n  },\n\n  isAuthorized(AuthorizedState) {\n    if (!AuthorizedState) {\n      if (window.location.pathname !== '/') window.location.href = '/';\n    }\n  }\n\n};","map":{"version":3,"sources":["/Users/michalratajewski/edupage/files/learning/src/utilis/authorize.js"],"names":["crypto","serverPath","authorize","login_input","password_input","sha256","console","log","resp","fetch","method","headers","body","JSON","stringify","login","password","Auto_login","credentials","then","data","json","catch","window","sessionStorage","setItem","e","CheckAuthorize","isAuthorized","AuthorizedState","location","pathname","href"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AAEA,eAAe;AAEX,QAAMC,SAAN,CAAgBC,WAAhB,EAA6BC,cAA7B,EAA6C;AACzC,QAAI;AACAA,MAAAA,cAAc,GAAG,MAAMJ,MAAM,CAACK,MAAP,CAAcD,cAAd,CAAvB;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYH,cAAZ;AACA,YAAMI,IAAI,GAAG,MAAMC,KAAK,CAACR,UAAU,KAAK,oBAAhB,EAAsC;AAC1DS,QAAAA,MAAM,EAAE,MADkD;AAE1DC,QAAAA,OAAO,EAAE;AACL,yCAA8B,GADzB;AAEL,0BAAgB;AAFX,SAFiD;AAM1DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,UAAAA,KAAK,EAAEZ,WADU;AAEjBa,UAAAA,QAAQ,EAAEZ,cAFO;AAGjBa,UAAAA,UAAU,EAAE;AAHK,SAAf,CANoD;AAW1DC,QAAAA,WAAW,EAAE;AAX6C,OAAtC,CAAL,CAYhBC,IAZgB,CAYXC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAZG,EAYUC,KAZV,CAYgB,IAZhB,CAAnB;;AAcA,UAAId,IAAI,KAAK,IAAb,EAAmB;AACf,YAAIA,IAAI,CAAC,MAAD,CAAJ,KAAiB,IAArB,EAA2B;AACvBe,UAAAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,EAAuCjB,IAAI,CAAC,OAAD,CAA3C;AACA,iBAAO,IAAP;AACH,SAHD,MAGO;AACH,iBAAO,KAAP;AACH;AACJ,OAPD,MAOO,OAAO,KAAP;AACV,KAzBD,CAyBE,OAAOkB,CAAP,EAAU;AACR,aAAO,KAAP;AACH;AACJ,GA/BU;;AAiCX,QAAMC,cAAN,GAAuB;AACnB,QAAI;AACA,YAAMnB,IAAI,GAAG,MAAMC,KAAK,CAACR,UAAU,KAAK,wBAAhB,EAA0C;AAC9DS,QAAAA,MAAM,EAAE,KADsD;AAE9DC,QAAAA,OAAO,EAAE;AACL,yCAA8B;AADzB,SAFqD;AAK9DO,QAAAA,WAAW,EAAE;AALiD,OAA1C,CAAL,CAMhBC,IANgB,CAMXC,IAAI,IAAIA,IAAI,CAACC,IAAL,EANG,EAMUC,KANV,CAMgB,IANhB,CAAnB;;AAOA,UAAId,IAAI,KAAK,IAAb,EAAmB;AACf,YAAIA,IAAI,CAAC,MAAD,CAAJ,KAAiB,IAArB,EAA2B;AACvB,iBAAOA,IAAI,CAAC,MAAD,CAAX;AACH,SAFD,MAEO,OAAO,IAAP;AACV,OAJD,MAIO,OAAO,IAAP;AACV,KAbD,CAaE,OAAOkB,CAAP,EAAU;AACR,aAAO,IAAP;AACH;AACJ,GAlDU;;AAoDXE,EAAAA,YAAY,CAACC,eAAD,EAAkB;AAC1B,QAAI,CAACA,eAAL,EAAsB;AAClB,UAAIN,MAAM,CAACO,QAAP,CAAgBC,QAAhB,KAA6B,GAAjC,EAAsCR,MAAM,CAACO,QAAP,CAAgBE,IAAhB,GAAuB,GAAvB;AACzC;AACJ;;AAxDU,CAAf","sourcesContent":["import crypto from \"./crypto\";\nimport serverPath from \"./server-path\";\n\nexport default {\n\n    async authorize(login_input, password_input) {\n        try {\n            password_input = await crypto.sha256(password_input)\n            console.log(password_input)\n            const resp = await fetch(serverPath() + 'api/auth/login.php', {\n                method: 'POST',\n                headers: {\n                    'Access-Control-Allow-Origin':'*',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    login: login_input,\n                    password: password_input,\n                    Auto_login: false\n                }),\n                credentials: 'include'\n            }).then(data => data.json()).catch(null)\n\n            if (resp !== null) {\n                if (resp[\"CODE\"] === 'OK') {\n                    window.sessionStorage.setItem('Token', resp['Token'])\n                    return true\n                } else {\n                    return false\n                }\n            } else return false;\n        } catch (e) {\n            return false\n        }\n    },\n\n    async CheckAuthorize() {\n        try {\n            const resp = await fetch(serverPath() + 'api/auth/authorize.php', {\n                method: 'GET',\n                headers: {\n                    'Access-Control-Allow-Origin':'*'\n                },\n                credentials: 'include'\n            }).then(data => data.json()).catch(null)\n            if (resp !== null) {\n                if (resp['CODE'] === 'OK') {\n                    return resp['DATA']\n                } else return null\n            } else return null\n        } catch (e) {\n            return null\n        }\n    },\n\n    isAuthorized(AuthorizedState) {\n        if (!AuthorizedState) {\n            if (window.location.pathname !== '/') window.location.href = '/'\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}