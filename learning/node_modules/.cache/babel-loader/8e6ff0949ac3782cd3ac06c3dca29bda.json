{"ast":null,"code":"var _jsxFileName = \"/Users/michalratajewski/edupage/files/learning/src/windows/Manage/SelectUsers.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport '../../styles/ShareLesson.css';\nimport SimpleBar from \"simplebar-react\";\nimport 'simplebar/dist/simplebar.min.css';\nimport serverPath from \"../../utilis/server-path\";\nimport image from '../../images/user.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SerachInput = callback => {\n  _s();\n\n  const [Query, SetQuery] = useState('');\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(() => {\n      callback.callback(Query); // Send Axios request here\n    }, 1000);\n    return () => clearTimeout(delayDebounceFn);\n  }, [Query]);\n  return /*#__PURE__*/_jsxDEV(\"input\", {\n    id: 'ShareLesson_search',\n    type: 'text',\n    placeholder: 'Szukaj',\n    onChange: e => SetQuery(e.target.value)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SerachInput, \"hu10paLte5h6n6Sq72ZmZF1J5XQ=\");\n\n_c = SerachInput;\nexport default class SelectUsers extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      Mode: 1,\n      UserPage: 1,\n      GroupPage: 1,\n      Users: [],\n      Group: [],\n      SelectedUsers: [],\n      SelectedGroup: [],\n      UserLoad: false,\n      GroupLoad: false,\n      SearchingMode: false,\n      Query: ''\n    };\n\n    if (this.props.users !== undefined) {\n      this.state.SelectedUsers = this.props.users;\n    }\n\n    if (this.props.group !== undefined) {\n      this.state.SelectedGroup = this.props.group;\n    }\n\n    this.scroll = /*#__PURE__*/React.createRef();\n  }\n\n  SearchQuery(query) {\n    if (!!query) {\n      this.scroll.current.scrollTop = 0;\n      this.state.Query = query;\n\n      if (this.state.Mode === 1) {\n        this.state.UserPage = 1;\n        this.state.UserLoad = false;\n        this.state.Users = [];\n        this.state.SearchingMode = true;\n        this.Searching();\n      } else {\n        this.state.GroupPage = 1;\n        this.state.GroupLoad = false;\n        this.state.Group = [];\n        this.state.SearchingMode = true;\n        this.Searching();\n      }\n    } else {\n      if (this.state.SearchingMode) {\n        this.state.SearchingMode = false;\n        this.state.GroupPage = 1;\n        this.state.GroupLoad = false;\n        this.state.Group = [];\n        this.state.UserPage = 1;\n        this.state.UserLoad = false;\n        this.state.Users = [];\n\n        if (this.state.Mode === 1) {\n          if (this.state.Group.length === 0) this.GetUsers();\n        } else {\n          if (this.state.Users.length === 0) this.GetGroups();\n        }\n\n        this.scroll.current.scrollTop = 0;\n      }\n    }\n  }\n\n  async Searching() {\n    try {\n      let resp;\n      if (this.state.Mode === 1) resp = await fetch(serverPath() + 'api/Users/Search.php?page=' + this.state.UserPage.toString() + '&query=' + encodeURIComponent(this.state.Query), {\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        },\n        credentials: 'include'\n      }).then(res => res.json()).catch(null);else resp = await fetch(serverPath() + 'api/Groups/Search.php?page=' + this.state.UserPage.toString() + '&query=' + encodeURIComponent(this.state.Query), {\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        },\n        credentials: 'include'\n      }).then(res => res.json()).catch(null);\n\n      if (resp !== null) {\n        if (resp['CODE'] === 'OK') {\n          if (Object.keys(this.state.Mode === 1 ? resp['Users'] : resp['Groups']).length > 0) {\n            if (this.state.Mode === 1) this.state.Users = this.state.Users.concat(resp['Users']);else this.state.Users = this.state.Group.concat(resp['Groups']);\n          } else this.state.Mode === 1 ? this.state.UserLoad = true : this.state.GroupLoad = true;\n        } else this.state.Mode === 1 ? this.state.UserLoad = true : this.state.GroupLoad = true;\n\n        this.forceUpdate();\n      }\n    } catch (e) {}\n  }\n\n  componentDidMount() {\n    this.GetUsers();\n    this.scroll.current.addEventListener('scroll', e => {\n      if (e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight) {\n        if (this.state.Mode === 1) {\n          if (!this.state.UserLoad) {\n            this.state.UserPage += 1;\n            if (!this.state.SearchingMode) this.GetUsers();else this.Searching();\n          }\n        } else {\n          if (!this.state.GroupLoad) {\n            this.state.GroupPage += 1;\n            if (!this.state.SearchingMode) this.GetGroups();else this.Searching();\n          }\n        }\n      }\n    });\n  }\n\n  changeType() {\n    if (this.state.SearchingMode) {\n      this.state.SearchingMode = false;\n      this.state.GroupPage = 1;\n      this.state.GroupLoad = false;\n      this.state.Group = [];\n      this.state.UserPage = 1;\n      this.state.UserLoad = false;\n      this.state.Users = [];\n      document.querySelector('#ShareLesson_search').value = '';\n    }\n\n    if (this.state.Mode === 1) {\n      if (this.state.Group.length === 0) this.GetGroups();\n      this.setState({\n        Mode: 2\n      });\n    } else {\n      if (this.state.Users.length === 0) this.GetUsers();\n      this.setState({\n        Mode: 1\n      });\n    }\n\n    this.scroll.current.scrollTop = 0;\n  }\n\n  async GetUsers() {\n    try {\n      const resp = await fetch(serverPath() + 'api/Users/?page=' + this.state.UserPage.toString(), {\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        },\n        credentials: 'include'\n      }).then(res => res.json()).catch(null);\n\n      if (resp !== null) {\n        if (resp['CODE'] === 'OK') {\n          if (Object.keys(resp['Users']).length > 0) {\n            this.state.Users = this.state.Users.concat(resp['Users']);\n            this.forceUpdate();\n          } else this.state.UserLoad = true;\n        } else this.state.UserLoad = true;\n      } else this.state.UserLoad = true;\n    } catch (e) {\n      this.state.UserLoad = true;\n    }\n  }\n\n  async GetGroups() {\n    try {\n      const resp = await fetch(serverPath() + 'api/Groups/?page=' + this.state.GroupPage.toString(), {\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        },\n        credentials: 'include'\n      }).then(res => res.json()).catch(null);\n\n      if (resp !== null) {\n        if (resp['CODE'] === 'OK') {\n          if (Object.keys(resp['Groups']).length > 0) {\n            this.state.Group = this.state.Group.concat(resp['Groups']);\n            this.forceUpdate();\n          } else this.state.GroupLoad = true;\n        } else this.state.GroupLoad = true;\n      } else this.state.GroupLoad = true;\n    } catch (e) {}\n  }\n\n  selectItem(id) {\n    if (this.state.Mode === 1) {\n      if (this.state.SelectedUsers.includes(id)) {\n        this.state.SelectedUsers.splice(this.state.SelectedUsers.indexOf(id), 1);\n      } else {\n        this.state.SelectedUsers.push(id);\n      }\n\n      this.forceUpdate();\n    } else if (this.state.Mode === 2) {\n      if (this.state.SelectedGroup.includes(id)) {\n        this.state.SelectedGroup.splice(this.state.SelectedGroup.indexOf(id), 1);\n      } else {\n        this.state.SelectedGroup.push(id);\n      }\n\n      this.forceUpdate();\n    }\n  }\n\n  showItems() {\n    const tab = [];\n\n    if (this.state.Mode === 1) {\n      if (this.state.Users.length > 0) for (let i = 0; i < this.state.Users.length; i++) {\n        tab.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: 'Sharelesson_main_view_table_user_item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: 'Sharelesson_main_view_table_user_item_image',\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: this.state.Users[i].Image.replaceAll(\" \", \"\") === '' ? image : this.state.Users[i].Image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                children: this.state.Users[i].Name + ' ' + this.state.Users[i].Surrname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"ShareLesson_container\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: this.state.SelectedUsers.includes(parseInt(this.state.Users[i].ID)),\n                onClick: e => this.selectItem(parseInt(this.state.Users[i].ID))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ShareLesson_checkmark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 30\n        }, this));\n      } else {\n        tab.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n          colSpan: 2,\n          children: /*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"500px\"\n              },\n              className: 'Sharelesson_main_view_table_user_item',\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                style: {\n                  width: 'fit-content',\n                  left: '50%',\n                  transform: 'translate(-50%, 0)',\n                  top: '0',\n                  padding: '0'\n                },\n                children: \"Brak danych\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 26\n        }, this));\n      }\n    } else {\n      if (this.state.Group.length > 0) for (let i = 0; i < this.state.Group.length; i++) {\n        tab.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: 'Sharelesson_main_view_table_user_item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: 'Sharelesson_main_view_table_user_item_image',\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  width: \"16\",\n                  height: \"16\",\n                  className: \"bi bi-people\",\n                  viewBox: \"0 0 16 16\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                children: this.state.Group[i].Name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"ShareLesson_container\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: this.state.SelectedGroup.includes(parseInt(this.state.Group[i].ID)),\n                onClick: e => this.selectItem(parseInt(this.state.Group[i].ID))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ShareLesson_checkmark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 30\n        }, this));\n      } else {\n        tab.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n          colSpan: 2,\n          children: /*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"500px\"\n              },\n              className: 'Sharelesson_main_view_table_user_item',\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                style: {\n                  width: 'fit-content',\n                  left: '50%',\n                  transform: 'translate(-50%, 0)',\n                  top: '0',\n                  padding: '0'\n                },\n                children: \"Brak danych\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 26\n        }, this));\n      }\n    }\n\n    return tab;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        paddingTop: '40px',\n        width: 'unset'\n      },\n      className: 'Sharelesson_main_view',\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'Sharelesson_main_view_search',\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          className: \"bi bi-search\",\n          viewBox: \"0 0 16 16\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(SerachInput, {\n          callback: e => this.SearchQuery(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: 'Sharelesson_main_view_table',\n        children: [/*#__PURE__*/_jsxDEV(\"colgroup\", {\n          children: [/*#__PURE__*/_jsxDEV(\"col\", {\n            span: \"1\",\n            style: {\n              width: \"360px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            span: \"1\",\n            style: {\n              width: \"140px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              backgroundColor: '#282c34'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                textAlign: 'center',\n                color: 'white'\n              },\n              children: \"Nazwa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                textAlign: 'center',\n                color: 'white'\n              },\n              children: \"Dost\\u0119p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SimpleBar, {\n        scrollableNodeProps: {\n          ref: this.scroll\n        },\n        forceVisible: \"y\",\n        autoHide: false,\n        style: {\n          width: '100%',\n          maxHeight: '500px',\n          overflowX: 'hidden'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: 'Sharelesson_main_view_table',\n          children: [/*#__PURE__*/_jsxDEV(\"colgroup\", {\n            children: [/*#__PURE__*/_jsxDEV(\"col\", {\n              span: \"1\",\n              style: {\n                width: \"30%\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n              span: \"1\",\n              style: {\n                width: \"50%\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.showItems()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"SerachInput\");","map":{"version":3,"sources":["/Users/michalratajewski/edupage/files/learning/src/windows/Manage/SelectUsers.js"],"names":["React","useEffect","useState","SimpleBar","serverPath","image","SerachInput","callback","Query","SetQuery","delayDebounceFn","setTimeout","clearTimeout","e","target","value","SelectUsers","Component","constructor","props","state","Mode","UserPage","GroupPage","Users","Group","SelectedUsers","SelectedGroup","UserLoad","GroupLoad","SearchingMode","users","undefined","group","scroll","createRef","SearchQuery","query","current","scrollTop","Searching","length","GetUsers","GetGroups","resp","fetch","toString","encodeURIComponent","headers","credentials","then","res","json","catch","Object","keys","concat","forceUpdate","componentDidMount","addEventListener","scrollHeight","clientHeight","changeType","document","querySelector","setState","selectItem","id","includes","splice","indexOf","push","showItems","tab","i","Image","replaceAll","Name","Surrname","parseInt","ID","width","left","transform","top","padding","render","paddingTop","backgroundColor","textAlign","color","ref","maxHeight","overflowX"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport '../../styles/ShareLesson.css';\nimport SimpleBar from \"simplebar-react\";\nimport 'simplebar/dist/simplebar.min.css';\nimport serverPath from \"../../utilis/server-path\";\nimport image from '../../images/user.jpg'\n\nconst SerachInput = (callback) => {\n    const [Query, SetQuery] = useState('')\n\n    useEffect(() => {\n        const delayDebounceFn = setTimeout(() => {\n            callback.callback(Query)\n            // Send Axios request here\n        }, 1000)\n\n        return () => clearTimeout(delayDebounceFn)\n    }, [Query])\n\n    return (\n        <input id={'ShareLesson_search'} type={'text'} placeholder={'Szukaj'} onChange={(e) => SetQuery(e.target.value)}/>\n    )\n\n}\n\nexport default class SelectUsers extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            Mode: 1,\n            UserPage: 1,\n            GroupPage: 1,\n            Users:[],\n            Group:[],\n            SelectedUsers:[],\n            SelectedGroup:[],\n            UserLoad: false,\n            GroupLoad: false,\n            SearchingMode: false,\n            Query: ''\n        }\n\n        if (this.props.users !== undefined) {\n            this.state.SelectedUsers = this.props.users\n        }\n\n        if (this.props.group !== undefined) {\n            this.state.SelectedGroup = this.props.group\n        }\n\n        this.scroll = React.createRef()\n    }\n\n    SearchQuery(query) {\n        if (!!query) {\n            this.scroll.current.scrollTop = 0\n            this.state.Query = query\n            if (this.state.Mode === 1) {\n                this.state.UserPage = 1\n                this.state.UserLoad = false\n                this.state.Users = []\n                this.state.SearchingMode = true\n                this.Searching()\n            } else {\n                this.state.GroupPage = 1\n                this.state.GroupLoad = false\n                this.state.Group = []\n                this.state.SearchingMode = true\n                this.Searching()\n            }\n        } else {\n            if (this.state.SearchingMode) {\n                this.state.SearchingMode = false\n                this.state.GroupPage = 1\n                this.state.GroupLoad = false\n                this.state.Group = []\n                this.state.UserPage = 1\n                this.state.UserLoad = false\n                this.state.Users = []\n                if (this.state.Mode === 1) {\n                    if (this.state.Group.length === 0) this.GetUsers()\n                } else {\n                    if (this.state.Users.length === 0) this.GetGroups()\n                }\n                this.scroll.current.scrollTop = 0\n            }\n        }\n    }\n\n    async Searching() {\n        try {\n            let resp\n            if (this.state.Mode === 1)\n                resp = await fetch(\n                    serverPath() + 'api/Users/Search.php?page=' + this.state.UserPage.toString() + '&query=' + encodeURIComponent(this.state.Query),\n                    {\n                        headers: {\n                            'Access-Control-Allow-Origin': '*'\n                        },\n                        credentials: 'include'\n                    }).then(res => res.json()).catch(null)\n            else resp = await fetch(\n                serverPath() + 'api/Groups/Search.php?page=' + this.state.UserPage.toString() + '&query=' + encodeURIComponent(this.state.Query),\n                {\n                    headers: {\n                        'Access-Control-Allow-Origin': '*'\n                    },\n                    credentials: 'include'\n                }).then(res => res.json()).catch(null)\n\n            if (resp !== null) {\n                if (resp['CODE'] === 'OK') {\n                    if (Object.keys(this.state.Mode === 1 ? resp['Users'] : resp['Groups'] ).length > 0) {\n                        if (this.state.Mode === 1)\n                            this.state.Users = this.state.Users.concat(resp['Users'])\n                        else this.state.Users = this.state.Group.concat(resp['Groups'])\n                    } else this.state.Mode === 1 ? this.state.UserLoad = true : this.state.GroupLoad = true\n                } else this.state.Mode === 1 ? this.state.UserLoad = true : this.state.GroupLoad = true\n                this.forceUpdate()\n            }\n        } catch (e) {\n\n        }\n    }\n\n    componentDidMount() {\n        this.GetUsers()\n        this.scroll.current.addEventListener('scroll', (e) => {\n            if (e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight)\n            {\n                if (this.state.Mode === 1) {\n                    if (!this.state.UserLoad) {\n                        this.state.UserPage += 1\n                        if (!this.state.SearchingMode)\n                            this.GetUsers()\n                        else this.Searching()\n                    }\n                } else {\n                    if (!this.state.GroupLoad) {\n                        this.state.GroupPage += 1\n                        if (!this.state.SearchingMode)\n                            this.GetGroups()\n                        else this.Searching()\n                    }\n                }\n            }\n        })\n    }\n\n    changeType() {\n        if (this.state.SearchingMode) {\n            this.state.SearchingMode = false\n            this.state.GroupPage = 1\n            this.state.GroupLoad = false\n            this.state.Group = []\n            this.state.UserPage = 1\n            this.state.UserLoad = false\n            this.state.Users = []\n            document.querySelector('#ShareLesson_search').value = ''\n        }\n        if (this.state.Mode === 1) {\n            if (this.state.Group.length === 0) this.GetGroups()\n            this.setState({Mode: 2})\n        } else {\n            if (this.state.Users.length === 0) this.GetUsers()\n            this.setState({Mode: 1})\n        }\n        this.scroll.current.scrollTop = 0\n    }\n\n    async GetUsers() {\n        try {\n            const resp = await fetch(\n                serverPath() + 'api/Users/?page=' + this.state.UserPage.toString(),\n                {\n                    headers: {\n                        'Access-Control-Allow-Origin': '*'\n                    },\n                    credentials: 'include'\n                }).then(res => res.json()).catch(null)\n            if (resp !== null) {\n                if (resp['CODE'] === 'OK') {\n                    if (Object.keys(resp['Users']).length > 0) {\n                        this.state.Users = this.state.Users.concat(resp['Users'])\n                        this.forceUpdate()\n                    } else this.state.UserLoad = true\n                } else this.state.UserLoad = true\n            }else this.state.UserLoad = true\n        } catch (e) {\n            this.state.UserLoad = true\n        }\n    }\n\n    async GetGroups() {\n        try {\n            const resp = await fetch(\n                serverPath() + 'api/Groups/?page=' + this.state.GroupPage.toString(),\n                {\n                    headers: {\n                        'Access-Control-Allow-Origin': '*'\n                    },\n                    credentials: 'include'\n                }).then(res => res.json()).catch(null)\n            if (resp !== null) {\n                if (resp['CODE'] === 'OK') {\n                    if (Object.keys(resp['Groups']).length > 0) {\n                        this.state.Group = this.state.Group.concat(resp['Groups'])\n                        this.forceUpdate()\n                    } else this.state.GroupLoad = true\n                } else this.state.GroupLoad = true\n            }else this.state.GroupLoad = true\n        } catch (e) {\n\n        }\n    }\n\n    selectItem(id) {\n        if (this.state.Mode === 1) {\n            if (this.state.SelectedUsers.includes(id)) {\n                this.state.SelectedUsers.splice(\n                    this.state.SelectedUsers.indexOf(id),\n                    1\n                )\n            } else {\n                this.state.SelectedUsers.push(id)\n            }\n            this.forceUpdate()\n        } else if (this.state.Mode === 2) {\n            if (this.state.SelectedGroup.includes(id)) {\n                this.state.SelectedGroup.splice(\n                    this.state.SelectedGroup.indexOf(id),\n                    1\n                )\n            } else {\n                this.state.SelectedGroup.push(id)\n            }\n            this.forceUpdate()\n        }\n    }\n\n    showItems() {\n        const tab = []\n        if (this.state.Mode === 1) {\n            if (this.state.Users.length > 0)\n                for(let i = 0; i < this.state.Users.length; i++) {\n                    tab.push(<tr>\n                        <th>\n                            <div className={'Sharelesson_main_view_table_user_item'}>\n                                <div className={'Sharelesson_main_view_table_user_item_image'}>\n                                    <img src={\n                                        this.state.Users[i].Image.replaceAll(\" \", \"\") === '' ?\n                                            image : this.state.Users[i].Image\n                                    }/>\n                                </div>\n                                <a>{this.state.Users[i].Name + ' ' + this.state.Users[i].Surrname}</a>\n                            </div>\n                        </th>\n                        <th>\n                            <label className=\"ShareLesson_container\">\n                                <input type=\"checkbox\"  checked={this.state.SelectedUsers.includes(parseInt(this.state.Users[i].ID))}  onClick={(e) => this.selectItem(parseInt(this.state.Users[i].ID))  }/>\n                                <span className=\"ShareLesson_checkmark\"></span>\n                            </label>\n                        </th>\n                    </tr>)\n                }\n            else {\n                tab.push(<tr colSpan={2}>\n                    <th>\n                        <div style={{width: \"500px\"}}  className={'Sharelesson_main_view_table_user_item'}>\n                            <a  style={{width: 'fit-content', left: '50%', transform: 'translate(-50%, 0)', top: '0', padding: '0'}}>Brak danych</a>\n                        </div>\n                    </th>\n                </tr>)\n            }\n        } else {\n            if (this.state.Group.length > 0)\n                for(let i = 0; i < this.state.Group.length; i++) {\n                    tab.push(<tr>\n                        <th>\n                            <div className={'Sharelesson_main_view_table_user_item'}>\n                                <div className={'Sharelesson_main_view_table_user_item_image'}>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\n                                         className=\"bi bi-people\" viewBox=\"0 0 16 16\">\n                                        <path\n                                            d=\"M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z\"/>\n                                    </svg>\n                                </div>\n                                <a>{this.state.Group[i].Name}</a>\n                            </div>\n                        </th>\n                        <th>\n                            <label className=\"ShareLesson_container\">\n                                <input type=\"checkbox\"  checked={this.state.SelectedGroup.includes(parseInt(this.state.Group[i].ID))}  onClick={(e) => this.selectItem(parseInt(this.state.Group[i].ID))  }/>\n                                <span className=\"ShareLesson_checkmark\"></span>\n                            </label>\n                        </th>\n                    </tr>)\n                }\n            else {\n                tab.push(<tr colSpan={2}>\n                    <th>\n                        <div style={{width: \"500px\"}}  className={'Sharelesson_main_view_table_user_item'}>\n                            <a  style={{width: 'fit-content', left: '50%', transform: 'translate(-50%, 0)', top: '0', padding: '0'}}>Brak danych</a>\n                        </div>\n                    </th>\n                </tr>)\n            }\n        }\n        return tab\n    }\n\n    render() {\n        return (\n            <div style={{paddingTop: '40px', width: 'unset'}} className={'Sharelesson_main_view'}>\n                {/*<button className={this.state.Mode === 1 ? 'Sharelesson_main_view_bt_selected' : ''}  onClick={this.changeType.bind(this)}>Użytkownicy</button>*/}\n                {/*<button className={this.state.Mode === 2 ? 'Sharelesson_main_view_bt_selected' : ''} onClick={this.changeType.bind(this)}>Grupy</button>*/}\n                <div className={'Sharelesson_main_view_search'}>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\n                         className=\"bi bi-search\" viewBox=\"0 0 16 16\">\n                        <path\n                            d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"/>\n                    </svg>\n                    <SerachInput callback={(e) => this.SearchQuery(e)}/>\n                </div>\n                <table className={'Sharelesson_main_view_table'}>\n                    <colgroup>\n                        <col span=\"1\" style={{width: \"360px\"}}/>\n                        <col span=\"1\" style={{width: \"140px\"}}/>\n                    </colgroup>\n                    <thead>\n                    <tr style={{backgroundColor: '#282c34'}}>\n                        <th style={{textAlign: 'center', color: 'white'}}>Nazwa</th>\n                        <th style={{textAlign: 'center', color: 'white'}}>Dostęp</th>\n                    </tr>\n                    </thead>\n                </table>\n                <SimpleBar scrollableNodeProps={{ref:this.scroll}} forceVisible=\"y\"  autoHide={false} style={{width: '100%', maxHeight: '500px', overflowX: 'hidden'}}>\n                    {/*<table style={{overflowX: 'hidden'}} className={'Sharelesson_main_view_table'}>*/}\n                    <table className={'Sharelesson_main_view_table'}>\n                        <colgroup>\n                            <col span=\"1\" style={{width: \"30%\"}}/>\n                            <col span=\"1\" style={{width: \"50%\"}}/>\n                        </colgroup>\n                        <tbody>\n                        {\n                            this.showItems()\n                        }\n                        </tbody>\n                    </table>\n                </SimpleBar>\n            </div>\n        )\n    }\n\n}"]},"metadata":{},"sourceType":"module"}