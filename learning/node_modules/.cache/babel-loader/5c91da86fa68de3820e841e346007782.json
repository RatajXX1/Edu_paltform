{"ast":null,"code":"import crypto from \"./crypto\";\nexport default {\n  async authorize(login_input, password_input) {\n    try {\n      password_input = await crypto.sha256(password_input);\n      const resp = await fetch('http://192.168.0.7:8080/api/auth/login.php', {\n        method: 'POST',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          login: login_input,\n          password: password_input\n        }),\n        credentials: 'include'\n      }).then(data => data.json()).catch(null);\n\n      if (resp !== null) {\n        if (resp[\"CODE\"] === 'OK') {\n          window.sessionStorage.setItem('Token', resp['Token']);\n          return true;\n        } else {\n          return false;\n        }\n      } else return false;\n    } catch (e) {\n      return false;\n    }\n  },\n\n  isAuthorized() {\n    return window.sessionStorage.getItem('Token') !== null;\n  }\n\n};","map":{"version":3,"sources":["/Users/michalratajewski/edupage/files/learning/src/utilis/authorize.js"],"names":["crypto","authorize","login_input","password_input","sha256","resp","fetch","method","headers","body","JSON","stringify","login","password","credentials","then","data","json","catch","window","sessionStorage","setItem","e","isAuthorized","getItem"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,UAAnB;AAEA,eAAe;AAEX,QAAMC,SAAN,CAAgBC,WAAhB,EAA6BC,cAA7B,EAA6C;AACzC,QAAI;AACAA,MAAAA,cAAc,GAAG,MAAMH,MAAM,CAACI,MAAP,CAAcD,cAAd,CAAvB;AACA,YAAME,IAAI,GAAG,MAAMC,KAAK,CAAC,4CAAD,EAA+C;AACnEC,QAAAA,MAAM,EAAE,MAD2D;AAEnEC,QAAAA,OAAO,EAAE;AACL,yCAA8B,GADzB;AAEL,0BAAgB;AAFX,SAF0D;AAMnEC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,UAAAA,KAAK,EAAEV,WAAR;AAAqBW,UAAAA,QAAQ,EAAEV;AAA/B,SAAf,CAN6D;AAOnEW,QAAAA,WAAW,EAAE;AAPsD,OAA/C,CAAL,CAQhBC,IARgB,CAQXC,IAAI,IAAIA,IAAI,CAACC,IAAL,EARG,EAQUC,KARV,CAQgB,IARhB,CAAnB;;AAUA,UAAIb,IAAI,KAAK,IAAb,EAAmB;AACf,YAAIA,IAAI,CAAC,MAAD,CAAJ,KAAiB,IAArB,EAA2B;AACvBc,UAAAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,EAAuChB,IAAI,CAAC,OAAD,CAA3C;AACA,iBAAO,IAAP;AACH,SAHD,MAGO;AACH,iBAAO,KAAP;AACH;AACJ,OAPD,MAOO,OAAO,KAAP;AACV,KApBD,CAoBE,OAAOiB,CAAP,EAAU;AACR,aAAO,KAAP;AACH;AACJ,GA1BU;;AA4BXC,EAAAA,YAAY,GAAG;AACX,WAAOJ,MAAM,CAACC,cAAP,CAAsBI,OAAtB,CAA8B,OAA9B,MAA2C,IAAlD;AACH;;AA9BU,CAAf","sourcesContent":["import crypto from \"./crypto\";\n\nexport default {\n\n    async authorize(login_input, password_input) {\n        try {\n            password_input = await crypto.sha256(password_input)\n            const resp = await fetch('http://192.168.0.7:8080/api/auth/login.php', {\n                method: 'POST',\n                headers: {\n                    'Access-Control-Allow-Origin':'*',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({login: login_input, password: password_input}),\n                credentials: 'include'\n            }).then(data => data.json()).catch(null)\n\n            if (resp !== null) {\n                if (resp[\"CODE\"] === 'OK') {\n                    window.sessionStorage.setItem('Token', resp['Token'])\n                    return true\n                } else {\n                    return false\n                }\n            } else return false;\n        } catch (e) {\n            return false\n        }\n    },\n\n    isAuthorized() {\n        return window.sessionStorage.getItem('Token') !== null;\n    }\n}"]},"metadata":{},"sourceType":"module"}