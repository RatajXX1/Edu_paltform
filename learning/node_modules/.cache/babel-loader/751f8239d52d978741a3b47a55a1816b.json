{"ast":null,"code":"var _jsxFileName = \"/Users/michalratajewski/edupage/files/learning/src/windows/CreateLesson.js\";\nimport React, { memo, useMemo } from \"react\";\nimport '../styles/CreateLesson.css';\nimport Cropper from \"react-cropper\";\nimport 'cropperjs/dist/cropper.css';\nimport ReactQuill from \"react-quill\";\nimport 'react-quill/dist/quill.snow.css';\nimport Calendar_pop from \"./calendar_pop\";\nimport ShareLesson from \"./ShareLesson\";\nimport * as mime from 'react-native-mime-types';\nimport serverPath from \"../utilis/server-path\";\nimport loading_lesson from '../images/loading_lesson.svg';\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class CreateLesson extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      UrlPath: serverPath(),\n      LoadingPop: false,\n      LessonCreated: false,\n      EditFile: false,\n      CalendarOpen: false,\n      BackgroundName: '',\n      AdditionalImages: [],\n      Content: {\n        Subject: '',\n        Image: '',\n        Desc: '',\n        Lesson: [{\n          Text: '',\n          Answer: 1,\n          Files: []\n        }],\n        EnableCode: 0,\n        Code: '',\n        CanExpire: 0,\n        Expire: new Date().toLocaleDateString(),\n        Users: [],\n        Groups: []\n      }\n    };\n    this.cropref = /*#__PURE__*/React.createRef();\n    this.modules = {\n      toolbar: {\n        container: [[{\n          'header': [1, 2, 3, 4, 5, 6, false]\n        }], ['bold', 'italic', 'underline'], [{\n          'list': 'ordered'\n        }, {\n          'list': 'bullet'\n        }], [{\n          'align': []\n        }], ['link', 'image'], ['clean'], [{\n          'color': []\n        }]] // handlers: {\n        //     image: this.imageHandler,\n        // },\n\n      }\n    };\n  }\n\n  CopyURL() {\n    const copyied = this.state.UrlPath;\n    navigator.clipboard.writeText(this.state.UrlPath);\n    this.state.UrlPath = 'skopiowano';\n    this.forceUpdate();\n    setTimeout(() => {\n      this.state.UrlPath = copyied;\n      this.forceUpdate();\n    }, 800);\n  }\n\n  CreateNext() {\n    document.location.reload();\n  }\n\n  CreatingLessonPop() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'CreateLesson_creatingpop',\n      children: [!this.state.LessonCreated && /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Tworzenie lekcji, prosze czeka\\u0107!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 47\n      }, this), !this.state.LessonCreated && /*#__PURE__*/_jsxDEV(\"img\", {\n        className: 'CreateLesson_creatingpop_view_loading',\n        src: loading_lesson,\n        alt: 'loading'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 47\n      }, this), this.state.LessonCreated && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          className: \"CreateLesson_creatingpop_done_logo\",\n          viewBox: \"0 0 16 16\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Lekcja zosta\\u0142a utworzona pomy\\u015Blnie!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          onClick: this.CopyURL.bind(this),\n          children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n            children: \"Adres URL lekcji\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            children: this.state.UrlPath\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"16\",\n            height: \"16\",\n            className: \"bi bi-clipboard-check\",\n            viewBox: \"0 0 16 16\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              \"fill-rule\": \"evenodd\",\n              d: \"M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.CreateNext.bind(this),\n          children: \"Stw\\xF3rz now\\u0105 lekcje\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this);\n  }\n\n  onSelectedFIle(e) {\n    if (e.target.files.length > 0) {\n      this.state.BackgroundName = e.target.files[0].name;\n      this.setState({\n        EditFile: true\n      });\n      const reader = new FileReader();\n      reader.readAsDataURL(e.target.files[0]);\n\n      reader.onload = d => {\n        const img = new Image();\n        img.src = d.target.result;\n\n        img.onload = c => {\n          var _this$cropref;\n\n          (_this$cropref = this.cropref) === null || _this$cropref === void 0 ? void 0 : _this$cropref.current.cropper.replace(c.target.src);\n        };\n      };\n    } else {\n      this.setState({\n        EditFile: false\n      });\n    }\n  }\n\n  ClickOnDate(time) {\n    // console.log(time)\n    time.setMonth(time.getMonth() + 1);\n    document.querySelector('#CreateLesson_main_view_expire_date_input').value = time.getFullYear() + '-' + (time.getMonth().toString().length === 1 ? '0' + time.getMonth() : time.getMonth()) + '-' + (time.getDate().toString().length === 1 ? '0' + time.getDate() : time.getDate());\n  }\n\n  RemoveChapter(id) {\n    if (this.state.Content.Lesson[id] !== undefined) {\n      this.state.Content.Lesson.splice(id, 1);\n      this.forceUpdate();\n    }\n  }\n\n  onCrop() {\n    function blobToFile(theBlob, fileName) {\n      return new File([theBlob], fileName, {\n        lastModified: new Date().getTime(),\n        type: theBlob.type\n      });\n    }\n\n    this.cropref.current.cropper.getCroppedCanvas().toBlob(e => {\n      this.state.Content.Image = blobToFile(e, this.state.BackgroundName);\n    });\n  }\n\n  removeSelectedFile(chapter, ID) {\n    if (this.state.Content.Lesson[chapter] !== undefined && this.state.Content.Lesson[chapter].Files[ID] !== undefined) {\n      this.state.Content.Lesson[chapter].Files.splice(ID, 1);\n      this.forceUpdate();\n    }\n  }\n\n  renderFiles(id) {\n    const tas = [];\n\n    for (let d = 0; d < this.state.Content.Lesson[id].Files.length; d++) {\n      tas.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: this.removeSelectedFile.bind(this, id, d),\n        className: 'Dash_main_view_body_chapter_files_item Dash_main_view_body_chapter_files_item_close_bt ',\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          className: \"bi bi-file-arrow-down\",\n          viewBox: \"0 0 16 16\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M8 5a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5A.5.5 0 0 1 8 5z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'Dash_main_view_body_chapter_files_item_text',\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            style: {\n              maxWidth: '50%'\n            },\n            children: this.state.Content.Lesson[id].Files[d].name.substr(0, this.state.Content.Lesson[id].Files[d].name.lastIndexOf('.') + 1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            children: [\".\", this.state.Content.Lesson[id].Files[d].name.substr(this.state.Content.Lesson[id].Files[d].name.lastIndexOf('.') + 1, this.state.Content.Lesson[id].Files[d].name.length)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: 'Dash_main_view_body_chapter_files_item_close',\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 16 16\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 22\n      }, this));\n    }\n\n    return tas;\n  }\n\n  RenderChapters() {\n    const tab = [];\n\n    for (let i = 0; i < this.state.Content.Lesson.length; i++) {\n      tab.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'CreateLesson_main_view_body_text',\n        children: [this.state.Content.Lesson.length > 1 && /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Rodzia\\u0142. \", i + 1]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 61\n        }, this), /*#__PURE__*/_jsxDEV(ReactQuill, {\n          modules: this.modules,\n          className: 'CreateLesson_main_view_editor',\n          placeholder: 'Zawartość lekcji',\n          onChange: html => {\n            this.state.Content.Lesson[i].Text = html;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }, this), this.state.Content.Lesson.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'CreateLesson_main_view_body_remove_chapter',\n          onClick: this.RemoveChapter.bind(this, i),\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"16\",\n            height: \"16\",\n            className: \"bi bi-x\",\n            viewBox: \"0 0 16 16\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 21\n          }, this), \"Usu\\u0144 rozdzia\\u0142\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 60\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'CreateLesson_main_view_body_text_answer',\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            style: {\n              display: 'inline-block',\n              marginTop: '15px'\n            },\n            children: \"Odpowiedz w formie:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            onChange: e => {\n              this.state.Content.Lesson[i].Answer = e.target.value;\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: 1,\n              children: \"tekstu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 2,\n              children: \"pliku/\\xF3w\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 3,\n              children: \"pliku/\\xF3w i tekstu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Za\\u0142acz pliki\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: 'file',\n              multiple: true,\n              style: {\n                display: 'none'\n              },\n              onChange: e => {\n                this.state.Content.Lesson[i].Files = [...this.state.Content.Lesson[i].Files, ...e.target.files];\n                this.forceUpdate();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: 'CreateLesson_main_view_body_text_answer_files',\n            children: this.renderFiles(i)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 22\n      }, this));\n    }\n\n    return tab;\n  }\n\n  addChapter() {\n    // console.log(this.state.Content.Lesson[0].Text)\n    if (this.state.Content.Lesson.length < 11) {\n      this.state.Content.Lesson.push({\n        Text: '',\n        Answer: 1,\n        Files: []\n      });\n      this.forceUpdate();\n    }\n  }\n\n  async sendFiles() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    console.log(\"Zaczynam przesyłanie plików...\");\n    const form = new FormData();\n\n    for (let i = 0; i < this.state.Content.Lesson[index].Files.length; i++) {\n      form.append(this.state.Content.Lesson[index].Files[i].name, this.state.Content.Lesson[index].Files[i]);\n    }\n\n    const resp = await fetch(serverPath() + \"api/Files/files.php\", {\n      method: \"POST\",\n      headers: {\n        'Access-Control-Allow-Origin': '*' // 'Content-Type': 'multipart/form-data'\n\n      },\n      body: form,\n      credentials: 'include'\n    }).then(data => data.json()).catch(null);\n\n    if (resp == null) {\n      console.log('Błąd w przesyłaniu plików');\n    } else {\n      if (resp['CODE'] === 'OK') {\n        this.state.Content.Lesson[index].Files = resp['Files'].join('|');\n        console.log('Udało sie przesyłać pliki');\n      } else {\n        this.state.Content.Lesson[index].Files = '';\n        console.log('Błąd w przesyłaniu plików');\n      }\n    }\n  }\n\n  async ImageFromEditor(index) {\n    const dataURItoBlob = dataURI => {\n      // convert base64 to raw binary data held in a string\n      // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n      var byteString = atob(dataURI.split(',')[1]); // separate out the mime component\n\n      var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]; // write the bytes of the string to an ArrayBuffer\n\n      var ab = new ArrayBuffer(byteString.length);\n      var ia = new Uint8Array(ab);\n\n      for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n\n      return new Blob([ab], {\n        type: mimeString\n      });\n    };\n\n    const blobToFile = (theBlob, fileName) => {\n      return new File([theBlob], fileName, {\n        lastModified: new Date().getTime(),\n        type: theBlob.type\n      });\n    };\n\n    const sendData = async Data => {\n      return await fetch(serverPath() + \"/api/Files/ImageContent.php\", {\n        method: \"POST\",\n        headers: {\n          'Access-Control-Allow-Origin': '*' // 'Content-Type': 'multipart/form-data'\n\n        },\n        body: Data,\n        credentials: 'include'\n      }).then(data => data.json()).catch(null);\n    };\n\n    if (this.state.Content.Lesson[index].Text.replaceAll(\" \", \"\") !== \"\") {\n      const htmlParser = document.createElement('body');\n      htmlParser.innerHTML = this.state.Content.Lesson[index].Text;\n      const form = new FormData();\n      let iterator = 1;\n      htmlParser.querySelectorAll('img').forEach(e => {\n        e.id = iterator.toString() + '_image_' + new Date().getTime();\n        const file = dataURItoBlob(e.src);\n        form.append(e.id + '.' + mime.extension(file.type), blobToFile(file, e.id + '.' + mime.extension(file.type)));\n        e.id = e.id + '.' + mime.extension(file.type);\n        iterator += 1;\n      });\n      await sendData(form).then(resp => {\n        if (resp !== null) {\n          if (resp['CODE'] === 'OK') {\n            if (Object.keys(resp['Files']).length > 0) {\n              htmlParser.querySelectorAll('img').forEach(e => {\n                e.src = serverPath() + 'api/Files' + resp['Files'][e.id];\n              });\n              this.state.Content.Lesson[index].Text = htmlParser.innerHTML;\n            }\n          } else {\n            console.log(\"Cos nie poszło z tym edytorem!\");\n          }\n        }\n      });\n    }\n  }\n\n  async sendForm() {\n    // if is ok when post data\n    for (let i = 0; i < this.state.Content.Lesson.length; i++) {\n      let size_Count = 0;\n\n      for (let d = 0; d < this.state.Content.Lesson[i].Files.length; d++) {\n        size_Count += this.state.Content.Lesson[i].Files[d].size;\n      }\n\n      if (size_Count >= 10000000) {\n        return toast.error('Załączone pliki nie mogą przekracząć 10Mb!', {\n          closeOnClick: true,\n          theme: 'colored'\n        });\n      }\n    } // this.state.LoadingPop = true\n    // this.forceUpdate()\n    // if (this.state.Content.Image !== '') {\n    //     const form = new FormData()\n    //     form.append(this.state.Content.Image.name, this.state.Content.Image)\n    //     const resp = await fetch( serverPath() + \"api/Files/ImageContent.php\", {\n    //         method:\"POST\",\n    //         headers: {\n    //             'Access-Control-Allow-Origin':'*',\n    //             // 'Content-Type': 'multipart/form-data'\n    //         },\n    //         body: form,\n    //         credentials: 'include'\n    //     }).then(data => data.json()).catch(null)\n    //     if (resp == null) {\n    //         console.log('Błąd w przesyłaniu plików')\n    //     } else {\n    //         if (resp['CODE'] === 'OK') {\n    //             this.state.Content.Image = resp['Files'][this.state.Content.Image.name]\n    //             console.log('Udało sie przesyłać pliki')\n    //         } else {\n    //             console.log('Błąd w przesyłaniu plików')\n    //         }\n    //     }\n    // }\n    // for (let i = 0; i < this.state.Content.Lesson.length; i++) {\n    //     if (this.state.Content.Lesson[i].Files.length > 0) await this.sendFiles(i)\n    //     else this.state.Content.Lesson[i].Files = ''\n    //     if (this.state.Content.Lesson[i].Text.length > 0) await this.ImageFromEditor(i)\n    // }\n    // try {\n    //     const resp = await fetch(serverPath() + \"api/Lessons/CreateLesson.php\", {\n    //         method: \"POST\",\n    //         headers: {\n    //             'Access-Control-Allow-Origin':'*',\n    //             'Content-Type': 'application/json'\n    //         },\n    //         body: JSON.stringify(this.state.Content),\n    //         credentials: 'include'\n    //     }).then(data => data.json()).catch(null)\n    //\n    //     if (resp !== null) {\n    //         if (resp[\"CODE\"] === 'OK') {\n    //             // window.sessionStorage.setItem('Token', resp['Token'])\n    //             this.state.LessonCreated = true\n    //             this.state.UrlPath = window.location.origin + '/main/lesson?ID=' + resp['ID']\n    //             this.forceUpdate()\n    //              return true\n    //         } else {\n    //             console.log(\"erro 1\")\n    //             // window.location.reload()\n    //             return false\n    //         }\n    //     } else return false;\n    // } catch (e) {\n    //     console.log(\"erro 2\")\n    //     // window.location.reload()\n    //     return false\n    // }\n\n  }\n\n  test() {\n    console.log(this.state.Content.Users, this.state.Content.Groups);\n  }\n\n  render() {\n    if (this.state.LoadingPop) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'CreateLesson_main_view',\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'CreateLesson_main_view_header',\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Tworzenie lekcje\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 17\n      }, this), this.CreatingLessonPop()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 13\n    }, this);else return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'CreateLesson_main_view',\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'CreateLesson_main_view_header',\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Tworzenie lekcje\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'CreateLesson_main_view_body',\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderBottom: '1px solid #282c34'\n          },\n          onClick: () => {\n            document.querySelector('#subject_input').focus();\n          },\n          className: 'CreateLesson_main_view_body_text',\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Temat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: 'subject_input',\n            type: 'text',\n            onChange: e => {\n              this.state.Content.Subject = e.target.value;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'CreateLesson_main_view_body_seletct_background',\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            style: {\n              display: 'inline-block',\n              margin: '10px 0 0 0'\n            },\n            children: \"Ustaw zdjecie lekcji\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: 'CreateLesson_main_view_select_image',\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: 'file',\n              style: {\n                display: 'none'\n              },\n              accept: 'image/png, image/gif, image/jpeg',\n              onChange: e => {\n                this.onSelectedFIle(e);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 29\n            }, this), \"Wybierz\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 25\n          }, this), this.state.EditFile && /*#__PURE__*/_jsxDEV(Cropper, {\n            src: 'https://wallpaperaccess.com/full/1916098.jpg',\n            className: 'CreateLesson_main_view_body_seletct_background_edit',\n            aspectRatio: 16 / 9,\n            guides: false,\n            checkCrossOrigin: false,\n            responsive: true,\n            scaleX: 1,\n            viewMode: 3,\n            autoCropArea: 1,\n            minCropBoxHeight: 100,\n            minCropBoxWidth: 250,\n            crop: this.onCrop.bind(this),\n            ref: this.cropref\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'CreateLesson_main_view_body_text',\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            children: \"Opis lekcji (Opcjonalne)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            placeholder: 'Opis',\n            onChange: e => {\n              this.state.Content.Desc = e.target.value;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Zawarto\\u015B\\u0107 lekcji\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 21\n        }, this), this.RenderChapters(), this.state.Content.Lesson.length < 10 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'CreateLesson_main_view_add_chapter',\n          onClick: this.addChapter.bind(this),\n          children: \"Dodaj rozdzia\\u0142\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 64\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Dost\\u0119pno\\u015B\\u0107 lekcji\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'CreateLesson_main_view_body_text',\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            children: \"Przypisz u\\u017Cytkownik\\xF3w bad\\u017A grupy do lekcji.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ShareLesson, {\n            users: this.state.Content.Users,\n            group: this.state.Content.Groups\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'CreateLesson_main_view_summary',\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.sendForm.bind(this),\n          children: \"Stw\\xF3rz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/michalratajewski/edupage/files/learning/src/windows/CreateLesson.js"],"names":["React","memo","useMemo","Cropper","ReactQuill","Calendar_pop","ShareLesson","mime","serverPath","loading_lesson","toast","CreateLesson","Component","constructor","props","state","UrlPath","LoadingPop","LessonCreated","EditFile","CalendarOpen","BackgroundName","AdditionalImages","Content","Subject","Image","Desc","Lesson","Text","Answer","Files","EnableCode","Code","CanExpire","Expire","Date","toLocaleDateString","Users","Groups","cropref","createRef","modules","toolbar","container","CopyURL","copyied","navigator","clipboard","writeText","forceUpdate","setTimeout","CreateNext","document","location","reload","CreatingLessonPop","bind","onSelectedFIle","e","target","files","length","name","setState","reader","FileReader","readAsDataURL","onload","d","img","src","result","c","current","cropper","replace","ClickOnDate","time","setMonth","getMonth","querySelector","value","getFullYear","toString","getDate","RemoveChapter","id","undefined","splice","onCrop","blobToFile","theBlob","fileName","File","lastModified","getTime","type","getCroppedCanvas","toBlob","removeSelectedFile","chapter","ID","renderFiles","tas","push","maxWidth","substr","lastIndexOf","RenderChapters","tab","i","html","display","marginTop","addChapter","sendFiles","index","console","log","form","FormData","append","resp","fetch","method","headers","body","credentials","then","data","json","catch","join","ImageFromEditor","dataURItoBlob","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","Blob","sendData","Data","replaceAll","htmlParser","createElement","innerHTML","iterator","querySelectorAll","forEach","file","extension","Object","keys","sendForm","size_Count","size","error","closeOnClick","theme","test","render","borderBottom","focus","margin"],"mappings":"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","sourcesContent":["import React, {memo, useMemo} from \"react\";\nimport '../styles/CreateLesson.css';\nimport Cropper from \"react-cropper\";\nimport 'cropperjs/dist/cropper.css';\nimport ReactQuill from \"react-quill\";\nimport 'react-quill/dist/quill.snow.css';\nimport Calendar_pop from \"./calendar_pop\";\nimport ShareLesson from \"./ShareLesson\";\nimport * as mime from 'react-native-mime-types';\nimport serverPath from \"../utilis/server-path\";\n\nimport loading_lesson from '../images/loading_lesson.svg'\nimport {toast} from \"react-toastify\";\n\nexport default class CreateLesson extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            UrlPath: serverPath(),\n            LoadingPop: false,\n            LessonCreated: false,\n            EditFile: false,\n            CalendarOpen: false,\n            BackgroundName: '',\n            AdditionalImages: [],\n            Content: {\n                Subject: '',\n                Image: '',\n                Desc: '',\n                Lesson: [\n                    {\n                        Text: '',\n                        Answer: 1,\n                        Files: [],\n                    }\n                ],\n                EnableCode: 0,\n                Code: '',\n                CanExpire: 0,\n                Expire: new Date().toLocaleDateString(),\n                Users: [],\n                Groups: []\n            }\n        }\n\n        this.cropref = React.createRef()\n\n        this.modules = {\n            toolbar: {\n                container: [\n                    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n                    ['bold', 'italic', 'underline'],\n                    [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n                    [{ 'align': [] }],\n                    ['link', 'image'],\n                    ['clean'],\n                    [{ 'color': [] }]\n                ],\n\n\n                // handlers: {\n                //     image: this.imageHandler,\n                // },\n            }\n        }\n    }\n\n\n    CopyURL() {\n        const copyied = this.state.UrlPath\n        navigator.clipboard.writeText(this.state.UrlPath)\n        this.state.UrlPath = 'skopiowano'\n        this.forceUpdate()\n        setTimeout(() => {\n            this.state.UrlPath = copyied\n            this.forceUpdate()\n        }, 800)\n    }\n\n    CreateNext() {\n        document.location.reload()\n    }\n\n    CreatingLessonPop() {\n        return (\n            <div className={'CreateLesson_creatingpop'}>\n                {!this.state.LessonCreated && <h2>Tworzenie lekcji, prosze czekać!</h2>}\n                {!this.state.LessonCreated && <img className={'CreateLesson_creatingpop_view_loading'} src={loading_lesson} alt={'loading'}/>}\n\n                {\n                    this.state.LessonCreated\n                        &&\n                    <div>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\n                             className=\"CreateLesson_creatingpop_done_logo\" viewBox=\"0 0 16 16\">\n                            <path\n                                d=\"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z\"/>\n                            <path\n                                d=\"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z\"/>\n                        </svg>\n                        <h2>Lekcja została utworzona pomyślnie!</h2>\n                        <fieldset onClick={this.CopyURL.bind(this)}>\n                            <legend>Adres URL lekcji</legend>\n                            <a>{this.state.UrlPath}</a>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\n                                 className=\"bi bi-clipboard-check\" viewBox=\"0 0 16 16\">\n                                <path fill-rule=\"evenodd\"\n                                      d=\"M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z\"/>\n                                <path\n                                    d=\"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z\"/>\n                                <path\n                                    d=\"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z\"/>\n                            </svg>\n                        </fieldset>\n                        <button onClick={this.CreateNext.bind(this)}>Stwórz nową lekcje</button>\n                    </div>\n                }\n\n            </div>\n        )\n    }\n\n    onSelectedFIle(e) {\n        if (e.target.files.length > 0) {\n            this.state.BackgroundName = e.target.files[0].name\n            this.setState({EditFile: true})\n            const reader = new FileReader()\n            reader.readAsDataURL(e.target.files[0])\n            reader.onload = (d) => {\n                const img = new Image()\n                img.src = d.target.result\n                img.onload = (c) => {\n                    this.cropref?.current.cropper.replace(c.target.src)\n                }\n            }\n        } else {\n            this.setState({EditFile: false})\n        }\n    }\n\n    ClickOnDate(time) {\n        // console.log(time)\n        time.setMonth(time.getMonth() + 1)\n        document.querySelector('#CreateLesson_main_view_expire_date_input')\n            .value = time.getFullYear() + '-' + (time.getMonth().toString().length === 1 ? '0' + time.getMonth() : time.getMonth()) + '-' + (time.getDate().toString().length === 1 ? '0' + time.getDate() : time.getDate())\n    }\n\n    RemoveChapter(id) {\n        if (this.state.Content.Lesson[id] !== undefined) {\n            this.state.Content.Lesson.splice(id , 1)\n            this.forceUpdate()\n        }\n    }\n\n    onCrop() {\n        function blobToFile(theBlob, fileName){\n            return new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type })\n        }\n        this.cropref.current.cropper.getCroppedCanvas().toBlob((e) => {this.state.Content.Image = blobToFile(e, this.state.BackgroundName);})\n    }\n\n    removeSelectedFile(chapter, ID) {\n        if (this.state.Content.Lesson[chapter] !== undefined &&  this.state.Content.Lesson[chapter].Files[ID] !== undefined) {\n            this.state.Content.Lesson[chapter].Files.splice(ID, 1)\n            this.forceUpdate()\n        }\n    }\n\n    renderFiles(id) {\n        const tas = []\n        for(let d = 0; d < this.state.Content.Lesson[id].Files.length; d++) {\n            tas.push(<div onClick={this.removeSelectedFile.bind(this, id, d)} className={'Dash_main_view_body_chapter_files_item Dash_main_view_body_chapter_files_item_close_bt '}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\n                     className=\"bi bi-file-arrow-down\" viewBox=\"0 0 16 16\">\n                    <path\n                        d=\"M8 5a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5A.5.5 0 0 1 8 5z\"/>\n                    <path\n                        d=\"M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z\"/>\n                </svg>\n                <div className={'Dash_main_view_body_chapter_files_item_text'}>\n                    <a style={{maxWidth: '50%'}}>\n                        {\n                            this.state.Content.Lesson[id].Files[d].name.substr(0, this.state.Content.Lesson[id].Files[d].name.lastIndexOf('.') + 1)\n                        }\n                    </a>\n                    <a>\n                        .\n                        {\n                            this.state.Content.Lesson[id].Files[d].name.substr(this.state.Content.Lesson[id].Files[d].name.lastIndexOf('.') + 1, this.state.Content.Lesson[id].Files[d].name.length)\n                        }\n                    </a>\n                    </div>\n\n                <svg className={'Dash_main_view_body_chapter_files_item_close'} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\n                     viewBox=\"0 0 16 16\">\n                    <path\n                        d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n                </svg>\n            </div>)\n            }\n        return tas\n    }\n\n    RenderChapters() {\n        const tab = []\n        for(let i = 0; i < this.state.Content.Lesson.length; i++) {\n            tab.push(<div className={'CreateLesson_main_view_body_text'}>\n                { (this.state.Content.Lesson.length > 1) && <h3>Rodział. {i + 1}</h3>}\n                <ReactQuill modules={this.modules} className={'CreateLesson_main_view_editor'} placeholder={'Zawartość lekcji'} onChange={(html) => {this.state.Content.Lesson[i].Text = html}}/>\n\n                {(this.state.Content.Lesson.length > 1) && <button className={'CreateLesson_main_view_body_remove_chapter'} onClick={this.RemoveChapter.bind(this, i)}>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"\n                         className=\"bi bi-x\" viewBox=\"0 0 16 16\">\n                        <path\n                            d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n                    </svg>\n                    Usuń rozdział\n                </button>}\n\n                <div className={'CreateLesson_main_view_body_text_answer'}>\n                    <a style={{display: 'inline-block', marginTop: '15px'}}>Odpowiedz w formie:</a>\n                    <select onChange={(e) => {this.state.Content.Lesson[i].Answer = e.target.value}}>\n                        <option value={1}>tekstu</option>\n                        <option value={2}>pliku/ów</option>\n                        <option value={3}>pliku/ów i tekstu</option>\n                    </select>\n                    <label>\n                        Załacz pliki\n                        <input type={'file'} multiple style={{display: 'none'}} onChange={\n                            (e) => {\n                                this.state.Content.Lesson[i].Files = [...this.state.Content.Lesson[i].Files, ...e.target.files]\n                                this.forceUpdate()\n                            }\n                        }/>\n                    </label>\n                    <div className={'CreateLesson_main_view_body_text_answer_files'}>\n                        {\n                           this.renderFiles(i)\n                        }\n                    </div>\n                </div>\n            </div>)\n        }\n        return tab\n    }\n\n    addChapter() {\n        // console.log(this.state.Content.Lesson[0].Text)\n        if (this.state.Content.Lesson.length < 11) {\n            this.state.Content.Lesson.push({Text: '', Answer: 1, Files: []})\n            this.forceUpdate()\n        }\n    }\n\n    async sendFiles(index = 0) {\n        console.log(\"Zaczynam przesyłanie plików...\")\n        const form = new FormData()\n        for (let i = 0; i < this.state.Content.Lesson[index].Files.length; i++) {\n            form.append(this.state.Content.Lesson[index].Files[i].name, this.state.Content.Lesson[index].Files[i])\n        }\n        const resp = await fetch(serverPath() + \"api/Files/files.php\", {\n            method:\"POST\",\n            headers: {\n                'Access-Control-Allow-Origin':'*',\n                // 'Content-Type': 'multipart/form-data'\n            },\n            body: form,\n            credentials: 'include'\n        }).then(data => data.json()).catch(null)\n\n        if (resp == null) {\n            console.log('Błąd w przesyłaniu plików')\n        } else {\n            if (resp['CODE'] === 'OK') {\n                this.state.Content.Lesson[index].Files = resp['Files'].join('|')\n                console.log('Udało sie przesyłać pliki')\n            } else {\n                this.state.Content.Lesson[index].Files = ''\n                console.log('Błąd w przesyłaniu plików')\n            }\n        }\n    }\n\n    async ImageFromEditor(index) {\n        const dataURItoBlob = (dataURI) => {\n            // convert base64 to raw binary data held in a string\n            // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n            var byteString = atob(dataURI.split(',')[1]);\n\n            // separate out the mime component\n            var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n\n            // write the bytes of the string to an ArrayBuffer\n            var ab = new ArrayBuffer(byteString.length);\n            var ia = new Uint8Array(ab);\n            for (var i = 0; i < byteString.length; i++) {\n                ia[i] = byteString.charCodeAt(i);\n            }\n\n            return new Blob([ab], {type: mimeString});\n        }\n\n        const blobToFile = (theBlob, fileName) => {\n            return new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type })\n        }\n\n        const sendData = async (Data) => {\n            return await fetch(serverPath() + \"/api/Files/ImageContent.php\", {\n                method:\"POST\",\n                headers: {\n                    'Access-Control-Allow-Origin':'*',\n                    // 'Content-Type': 'multipart/form-data'\n                },\n                body: Data,\n                credentials: 'include'\n            }).then(data => data.json()).catch(null)\n        }\n\n        if (this.state.Content.Lesson[index].Text.replaceAll(\" \", \"\") !== \"\") {\n            const htmlParser = document.createElement('body')\n            htmlParser.innerHTML = this.state.Content.Lesson[index].Text\n            const form = new FormData()\n            let iterator = 1\n            htmlParser.querySelectorAll('img').forEach((e) => {\n                e.id = iterator.toString() + '_image_' + new Date().getTime()\n                const file = dataURItoBlob(e.src)\n                form.append(e.id + '.' + mime.extension(file.type), blobToFile(file, e.id + '.' + mime.extension(file.type)))\n                e.id = e.id + '.' + mime.extension(file.type)\n                iterator += 1\n            })\n            await sendData(form).then((resp) => {\n                if (resp !== null) {\n                    if (resp['CODE'] === 'OK') {\n                        if (Object.keys(resp['Files']).length > 0) {\n                            htmlParser.querySelectorAll('img')\n                                .forEach((e) => {\n                                        e.src = serverPath() + 'api/Files' + resp['Files'][e.id]\n                                    }\n                                )\n                            this.state.Content.Lesson[index].Text = htmlParser.innerHTML\n                        }\n                    } else {\n                        console.log(\"Cos nie poszło z tym edytorem!\")\n                    }\n                }\n            })\n        }\n    }\n\n    async sendForm() {\n        // if is ok when post data\n        for (let i = 0; i < this.state.Content.Lesson.length; i++) {\n            let size_Count = 0\n            for (let d = 0; d < this.state.Content.Lesson[i].Files.length ; d++) {\n                size_Count += this.state.Content.Lesson[i].Files[d].size\n            }\n            if (size_Count >= 10000000) {\n                return toast.error('Załączone pliki nie mogą przekracząć 10Mb!',{closeOnClick: true, theme: 'colored'})\n            }\n        }\n\n        // this.state.LoadingPop = true\n        // this.forceUpdate()\n        // if (this.state.Content.Image !== '') {\n        //     const form = new FormData()\n        //     form.append(this.state.Content.Image.name, this.state.Content.Image)\n        //     const resp = await fetch( serverPath() + \"api/Files/ImageContent.php\", {\n        //         method:\"POST\",\n        //         headers: {\n        //             'Access-Control-Allow-Origin':'*',\n        //             // 'Content-Type': 'multipart/form-data'\n        //         },\n        //         body: form,\n        //         credentials: 'include'\n        //     }).then(data => data.json()).catch(null)\n        //     if (resp == null) {\n        //         console.log('Błąd w przesyłaniu plików')\n        //     } else {\n        //         if (resp['CODE'] === 'OK') {\n        //             this.state.Content.Image = resp['Files'][this.state.Content.Image.name]\n        //             console.log('Udało sie przesyłać pliki')\n        //         } else {\n        //             console.log('Błąd w przesyłaniu plików')\n        //         }\n        //     }\n        // }\n        // for (let i = 0; i < this.state.Content.Lesson.length; i++) {\n        //     if (this.state.Content.Lesson[i].Files.length > 0) await this.sendFiles(i)\n        //     else this.state.Content.Lesson[i].Files = ''\n        //     if (this.state.Content.Lesson[i].Text.length > 0) await this.ImageFromEditor(i)\n        // }\n        // try {\n        //     const resp = await fetch(serverPath() + \"api/Lessons/CreateLesson.php\", {\n        //         method: \"POST\",\n        //         headers: {\n        //             'Access-Control-Allow-Origin':'*',\n        //             'Content-Type': 'application/json'\n        //         },\n        //         body: JSON.stringify(this.state.Content),\n        //         credentials: 'include'\n        //     }).then(data => data.json()).catch(null)\n        //\n        //     if (resp !== null) {\n        //         if (resp[\"CODE\"] === 'OK') {\n        //             // window.sessionStorage.setItem('Token', resp['Token'])\n        //             this.state.LessonCreated = true\n        //             this.state.UrlPath = window.location.origin + '/main/lesson?ID=' + resp['ID']\n        //             this.forceUpdate()\n        //              return true\n        //         } else {\n        //             console.log(\"erro 1\")\n        //             // window.location.reload()\n        //             return false\n        //         }\n        //     } else return false;\n        // } catch (e) {\n        //     console.log(\"erro 2\")\n        //     // window.location.reload()\n        //     return false\n        // }\n    }\n\n    test() {\n        console.log(this.state.Content.Users, this.state.Content.Groups)\n    }\n\n    render() {\n        if (this.state.LoadingPop) return (\n            <div className={'CreateLesson_main_view'}>\n                <div className={'CreateLesson_main_view_header'}>\n                    <h1>Tworzenie lekcje</h1>\n                </div>\n                {this.CreatingLessonPop()}\n            </div>\n        )\n        else return(\n            <div className={'CreateLesson_main_view'}>\n                <div className={'CreateLesson_main_view_header'}>\n                    <h1>Tworzenie lekcje</h1>\n                </div>\n                <div className={'CreateLesson_main_view_body'}>\n                    <div style={{borderBottom: '1px solid #282c34'}} onClick={() => {document.querySelector('#subject_input').focus()}} className={'CreateLesson_main_view_body_text'}>\n                        <h2>Temat</h2>\n                        <input id={'subject_input'} type={'text'}  onChange={(e) => { this.state.Content.Subject = e.target.value }}/>\n                    </div>\n                    <div className={'CreateLesson_main_view_body_seletct_background'}>\n                        <a style={{display: 'inline-block', margin: '10px 0 0 0'}}>Ustaw zdjecie lekcji</a>\n                        <label className={'CreateLesson_main_view_select_image'}>\n                            <input type={'file'} style={{display: 'none'}} accept={'image/png, image/gif, image/jpeg'}\n                                   onChange={(e) => {\n                                       this.onSelectedFIle(e)\n                                   }}/>\n                            Wybierz\n                        </label>\n\n                        {this.state.EditFile &&\n                            <Cropper src={'https://wallpaperaccess.com/full/1916098.jpg'}\n                                  className={'CreateLesson_main_view_body_seletct_background_edit'}\n                                  aspectRatio={16 / 9}\n                                  guides={false}\n                                  checkCrossOrigin={false}\n                                  responsive={true}\n                                  scaleX={1}\n                                  viewMode={3}\n                                  autoCropArea={1}\n                                  minCropBoxHeight={100}\n                                  minCropBoxWidth={250}\n                                  crop={this.onCrop.bind(this)}\n                                  ref={this.cropref }\n                            />\n                        }\n\n                    </div>\n                    <div className={'CreateLesson_main_view_body_text'}>\n                        <a>Opis lekcji (Opcjonalne)</a>\n                        <textarea placeholder={'Opis'} onChange={(e) => {this.state.Content.Desc = e.target.value}}></textarea>\n                    </div>\n                    <h2>Zawartość lekcji</h2>\n                    {this.RenderChapters()}\n                    { this.state.Content.Lesson.length < 10 && <button className={'CreateLesson_main_view_add_chapter'} onClick={this.addChapter.bind(this)}>Dodaj\n                        rozdział</button>}\n                    <h2>Dostępność lekcji</h2>\n                    {/*<div className={'CreateLesson_main_view_body_text'}>*/}\n                    {/*    <label className=\"container_lesson\">*/}\n                    {/*        <input type=\"checkbox\" onChange={(e) => {this.state.Content.EnableCode = (e.target.value ? 1 : 0); this.forceUpdate()}} />*/}\n                    {/*        <span className=\"checkmark_lesson\"></span>*/}\n                    {/*    </label>*/}\n                    {/*    <a>Zabezpiecz dostęp do lekcje kodem</a>*/}\n                    {/*    {*/}\n                    {/*        this.state.Content.EnableCode === 1 &&*/}\n                    {/*        <div className={'CreateLesson_main_view_PassCode'}>*/}\n                    {/*            <a style={{display: 'block', margin: '0 10px 10px 10px', paddingLeft: '20px'}}>Aby wykonywać*/}\n                    {/*                daną lekcja trzeba najpierw podać ten kod.</a>*/}\n                    {/*            <input type={'text'} placeholder={'Kod'} onChange={(e) => {this.state.Content.Code = e.target.value} }/>*/}\n                    {/*            <button>*/}\n                    {/*                Generuj losowy kod*/}\n                    {/*            </button>*/}\n                    {/*        </div>*/}\n                    {/*    }*/}\n                    {/*</div>*/}\n                    {/*<div className={'CreateLesson_main_view_body_text'}>*/}\n                    {/*    <label className=\"container_lesson\">*/}\n                    {/*        <input type=\"checkbox\" onChange={(e) => {this.state.Content.CanExpire = (e.target.value ? 1 : 0); this.forceUpdate()}} />*/}\n                    {/*        <span className=\"checkmark_lesson\"></span>*/}\n                    {/*    </label>*/}\n                    {/*    <a>Ogranicz czasowo widocznośc lekcji</a>*/}\n                    {/*    {*/}\n                    {/*        this.state.Content.CanExpire === 1 &&*/}\n                    {/*        <div style={{width: 'fit-content'}} className={'CreateLesson_main_view_expire_date'}>*/}\n                    {/*            <a>Data po której lekcja nie będzie już widoczna</a>*/}\n                    {/*            <input*/}\n                    {/*                id={'CreateLesson_main_view_expire_date_input'}*/}\n                    {/*                onClick={() => {*/}\n                    {/*                    {*/}\n                    {/*                        this.setState({CalendarOpen: true})*/}\n                    {/*                    }*/}\n                    {/*                }}*/}\n                    {/*                type={'button'}*/}\n                    {/*                value={'2022-04-1'}*/}\n                    {/*            />*/}\n                    {/*            {this.state.CalendarOpen && <Calendar_pop onSelect={(e) => {*/}\n                    {/*                this.ClickOnDate(e)*/}\n                    {/*            }} close={() => {*/}\n                    {/*                this.setState({CalendarOpen: false})*/}\n                    {/*            }}/>}*/}\n                    {/*        </div>*/}\n                    {/*    }*/}\n                    {/*</div>*/}\n                    <div className={'CreateLesson_main_view_body_text'}>\n                        <a>Przypisz użytkowników badź grupy do lekcji.</a>\n                        <ShareLesson users={this.state.Content.Users} group={this.state.Content.Groups} />\n                    </div>\n                </div>\n\n                <div className={'CreateLesson_main_view_summary'}>\n                    {/*<button onClick={this.test.bind(this)}>Stwórz</button>*/}\n                    <button onClick={this.sendForm.bind(this)}>Stwórz</button>\n                </div>\n            </div>\n        )\n    }\n\n}"]},"metadata":{},"sourceType":"module"}